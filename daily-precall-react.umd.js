(function(Le,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],g):(Le=typeof globalThis<"u"?globalThis:Le||self,g(Le["daily-precall-react"]={},Le.React,Le.ReactDOM))})(this,function(Le,g,ds){"use strict";var Tn={exports:{}},mt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho;function fs(){if(ho)return mt;ho=1;var t=g,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,l,d){var p,v={},A=null,V=null;d!==void 0&&(A=""+d),l.key!==void 0&&(A=""+l.key),l.ref!==void 0&&(V=l.ref);for(p in l)o.call(l,p)&&!s.hasOwnProperty(p)&&(v[p]=l[p]);if(u&&u.defaultProps)for(p in l=u.defaultProps,l)v[p]===void 0&&(v[p]=l[p]);return{$$typeof:e,type:u,key:A,ref:V,props:v,_owner:r.current}}return mt.Fragment=n,mt.jsx=a,mt.jsxs=a,mt}var St={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po;function hs(){return po||(po=1,process.env.NODE_ENV!=="production"&&function(){var t=g,e=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),R=Symbol.iterator,C="@@iterator";function W(i){if(i===null||typeof i!="object")return null;var m=R&&i[R]||i[C];return typeof m=="function"?m:null}var G=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function S(i){{for(var m=arguments.length,w=new Array(m>1?m-1:0),O=1;O<m;O++)w[O-1]=arguments[O];k("error",i,w)}}function k(i,m,w){{var O=G.ReactDebugCurrentFrame,te=O.getStackAddendum();te!==""&&(m+="%s",w=w.concat([te]));var ae=w.map(function(J){return String(J)});ae.unshift("Warning: "+m),Function.prototype.apply.call(console[i],console,ae)}}var B=!1,K=!1,Z=!1,Q=!1,le=!1,ye;ye=Symbol.for("react.module.reference");function H(i){return!!(typeof i=="string"||typeof i=="function"||i===o||i===s||le||i===r||i===d||i===p||Q||i===V||B||K||Z||typeof i=="object"&&i!==null&&(i.$$typeof===A||i.$$typeof===v||i.$$typeof===a||i.$$typeof===u||i.$$typeof===l||i.$$typeof===ye||i.getModuleId!==void 0))}function _e(i,m,w){var O=i.displayName;if(O)return O;var te=m.displayName||m.name||"";return te!==""?w+"("+te+")":w}function Ue(i){return i.displayName||"Context"}function se(i){if(i==null)return null;if(typeof i.tag=="number"&&S("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case o:return"Fragment";case n:return"Portal";case s:return"Profiler";case r:return"StrictMode";case d:return"Suspense";case p:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case u:var m=i;return Ue(m)+".Consumer";case a:var w=i;return Ue(w._context)+".Provider";case l:return _e(i,i.render,"ForwardRef");case v:var O=i.displayName||null;return O!==null?O:se(i.type)||"Memo";case A:{var te=i,ae=te._payload,J=te._init;try{return se(J(ae))}catch{return null}}}return null}var de=Object.assign,ke=0,Be,Ie,Fe,We,q,X,h;function y(){}y.__reactDisabledLog=!0;function T(){{if(ke===0){Be=console.log,Ie=console.info,Fe=console.warn,We=console.error,q=console.group,X=console.groupCollapsed,h=console.groupEnd;var i={configurable:!0,enumerable:!0,value:y,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}ke++}}function U(){{if(ke--,ke===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:de({},i,{value:Be}),info:de({},i,{value:Ie}),warn:de({},i,{value:Fe}),error:de({},i,{value:We}),group:de({},i,{value:q}),groupCollapsed:de({},i,{value:X}),groupEnd:de({},i,{value:h})})}ke<0&&S("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var L=G.ReactCurrentDispatcher,j;function F(i,m,w){{if(j===void 0)try{throw Error()}catch(te){var O=te.stack.trim().match(/\n( *(at )?)/);j=O&&O[1]||""}return`
`+j+i}}var I=!1,ne;{var fe=typeof WeakMap=="function"?WeakMap:Map;ne=new fe}function ee(i,m){if(!i||I)return"";{var w=ne.get(i);if(w!==void 0)return w}var O;I=!0;var te=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ae;ae=L.current,L.current=null,T();try{if(m){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(ze){O=ze}Reflect.construct(i,[],J)}else{try{J.call()}catch(ze){O=ze}i.call(J.prototype)}}else{try{throw Error()}catch(ze){O=ze}i()}}catch(ze){if(ze&&O&&typeof ze.stack=="string"){for(var Y=ze.stack.split(`
`),Ee=O.stack.split(`
`),he=Y.length-1,ve=Ee.length-1;he>=1&&ve>=0&&Y[he]!==Ee[ve];)ve--;for(;he>=1&&ve>=0;he--,ve--)if(Y[he]!==Ee[ve]){if(he!==1||ve!==1)do if(he--,ve--,ve<0||Y[he]!==Ee[ve]){var De=`
`+Y[he].replace(" at new "," at ");return i.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",i.displayName)),typeof i=="function"&&ne.set(i,De),De}while(he>=1&&ve>=0);break}}}finally{I=!1,L.current=ae,U(),Error.prepareStackTrace=te}var _t=i?i.displayName||i.name:"",ls=_t?F(_t):"";return typeof i=="function"&&ne.set(i,ls),ls}function ce(i,m,w){return ee(i,!1)}function Ae(i){var m=i.prototype;return!!(m&&m.isReactComponent)}function Pe(i,m,w){if(i==null)return"";if(typeof i=="function")return ee(i,Ae(i));if(typeof i=="string")return F(i);switch(i){case d:return F("Suspense");case p:return F("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case l:return ce(i.render);case v:return Pe(i.type,m,w);case A:{var O=i,te=O._payload,ae=O._init;try{return Pe(ae(te),m,w)}catch{}}}return""}var me=Object.prototype.hasOwnProperty,ge={},Ot=G.ReactDebugCurrentFrame;function ft(i){if(i){var m=i._owner,w=Pe(i.type,i._source,m?m.type:null);Ot.setExtraStackFrame(w)}else Ot.setExtraStackFrame(null)}function Mt(i,m,w,O,te){{var ae=Function.call.bind(me);for(var J in i)if(ae(i,J)){var Y=void 0;try{if(typeof i[J]!="function"){var Ee=Error((O||"React class")+": "+w+" type `"+J+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[J]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ee.name="Invariant Violation",Ee}Y=i[J](m,J,O,w,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(he){Y=he}Y&&!(Y instanceof Error)&&(ft(te),S("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",O||"React class",w,J,typeof Y),ft(null)),Y instanceof Error&&!(Y.message in ge)&&(ge[Y.message]=!0,ft(te),S("Failed %s type: %s",w,Y.message),ft(null))}}}var Sn=Array.isArray;function ht(i){return Sn(i)}function co(i){{var m=typeof Symbol=="function"&&Symbol.toStringTag,w=m&&i[Symbol.toStringTag]||i.constructor.name||"Object";return w}}function Ut(i){try{return pt(i),!1}catch{return!0}}function pt(i){return""+i}function Rn(i){if(Ut(i))return S("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",co(i)),pt(i)}var nt=G.ReactCurrentOwner,uo={key:!0,ref:!0,__self:!0,__source:!0},yn,gn,xt;xt={};function bn(i){if(me.call(i,"ref")){var m=Object.getOwnPropertyDescriptor(i,"ref").get;if(m&&m.isReactWarning)return!1}return i.ref!==void 0}function lo(i){if(me.call(i,"key")){var m=Object.getOwnPropertyDescriptor(i,"key").get;if(m&&m.isReactWarning)return!1}return i.key!==void 0}function fo(i,m){if(typeof i.ref=="string"&&nt.current&&m&&nt.current.stateNode!==m){var w=se(nt.current.type);xt[w]||(S('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',se(nt.current.type),i.ref),xt[w]=!0)}}function f(i,m){{var w=function(){yn||(yn=!0,S("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",m))};w.isReactWarning=!0,Object.defineProperty(i,"key",{get:w,configurable:!0})}}function c(i,m){{var w=function(){gn||(gn=!0,S("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",m))};w.isReactWarning=!0,Object.defineProperty(i,"ref",{get:w,configurable:!0})}}var _=function(i,m,w,O,te,ae,J){var Y={$$typeof:e,type:i,key:m,ref:w,props:J,_owner:ae};return Y._store={},Object.defineProperty(Y._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Y,"_self",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(Y,"_source",{configurable:!1,enumerable:!1,writable:!1,value:te}),Object.freeze&&(Object.freeze(Y.props),Object.freeze(Y)),Y};function E(i,m,w,O,te){{var ae,J={},Y=null,Ee=null;w!==void 0&&(Rn(w),Y=""+w),lo(m)&&(Rn(m.key),Y=""+m.key),bn(m)&&(Ee=m.ref,fo(m,te));for(ae in m)me.call(m,ae)&&!uo.hasOwnProperty(ae)&&(J[ae]=m[ae]);if(i&&i.defaultProps){var he=i.defaultProps;for(ae in he)J[ae]===void 0&&(J[ae]=he[ae])}if(Y||Ee){var ve=typeof i=="function"?i.displayName||i.name||"Unknown":i;Y&&f(J,ve),Ee&&c(J,ve)}return _(i,Y,Ee,te,O,nt.current,J)}}var b=G.ReactCurrentOwner,N=G.ReactDebugCurrentFrame;function P(i){if(i){var m=i._owner,w=Pe(i.type,i._source,m?m.type:null);N.setExtraStackFrame(w)}else N.setExtraStackFrame(null)}var D;D=!1;function $(i){return typeof i=="object"&&i!==null&&i.$$typeof===e}function z(){{if(b.current){var i=se(b.current.type);if(i)return`

Check the render method of \``+i+"`."}return""}}function ie(i){{if(i!==void 0){var m=i.fileName.replace(/^.*[\\\/]/,""),w=i.lineNumber;return`

Check your code at `+m+":"+w+"."}return""}}var Re={};function pe(i){{var m=z();if(!m){var w=typeof i=="string"?i:i.displayName||i.name;w&&(m=`

Check the top-level render call using <`+w+">.")}return m}}function Te(i,m){{if(!i._store||i._store.validated||i.key!=null)return;i._store.validated=!0;var w=pe(m);if(Re[w])return;Re[w]=!0;var O="";i&&i._owner&&i._owner!==b.current&&(O=" It was passed a child from "+se(i._owner.type)+"."),P(i),S('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',w,O),P(null)}}function Ce(i,m){{if(typeof i!="object")return;if(ht(i))for(var w=0;w<i.length;w++){var O=i[w];$(O)&&Te(O,m)}else if($(i))i._store&&(i._store.validated=!0);else if(i){var te=W(i);if(typeof te=="function"&&te!==i.entries)for(var ae=te.call(i),J;!(J=ae.next()).done;)$(J.value)&&Te(J.value,m)}}}function He(i){{var m=i.type;if(m==null||typeof m=="string")return;var w;if(typeof m=="function")w=m.propTypes;else if(typeof m=="object"&&(m.$$typeof===l||m.$$typeof===v))w=m.propTypes;else return;if(w){var O=se(m);Mt(w,i.props,"prop",O,i)}else if(m.PropTypes!==void 0&&!D){D=!0;var te=se(m);S("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",te||"Unknown")}typeof m.getDefaultProps=="function"&&!m.getDefaultProps.isReactClassApproved&&S("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function vt(i){{for(var m=Object.keys(i.props),w=0;w<m.length;w++){var O=m[w];if(O!=="children"&&O!=="key"){P(i),S("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",O),P(null);break}}i.ref!==null&&(P(i),S("Invalid attribute `ref` supplied to `React.Fragment`."),P(null))}}function Ye(i,m,w,O,te,ae){{var J=H(i);if(!J){var Y="";(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(Y+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ee=ie(te);Ee?Y+=Ee:Y+=z();var he;i===null?he="null":ht(i)?he="array":i!==void 0&&i.$$typeof===e?(he="<"+(se(i.type)||"Unknown")+" />",Y=" Did you accidentally export a JSX literal instead of a component?"):he=typeof i,S("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",he,Y)}var ve=E(i,m,w,te,ae);if(ve==null)return ve;if(J){var De=m.children;if(De!==void 0)if(O)if(ht(De)){for(var _t=0;_t<De.length;_t++)Ce(De[_t],i);Object.freeze&&Object.freeze(De)}else S("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ce(De,i)}return i===o?vt(ve):He(ve),ve}}function ot(i,m,w){return Ye(i,m,w,!0)}function $f(i,m,w){return Ye(i,m,w,!1)}var Of=$f,Mf=ot;St.Fragment=o,St.jsx=Of,St.jsxs=Mf}()),St}process.env.NODE_ENV==="production"?Tn.exports=fs():Tn.exports=hs();var En=Tn.exports;function ps(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var vs=ps,M=vs;function _s(t){return!!t&&typeof t.then=="function"}var oe=_s;function ms(t,e){if(t!=null)return t;throw M(e??"Got unexpected null or undefined")}var ue=ms;function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Bt{getValue(){throw M("BaseLoadable")}toPromise(){throw M("BaseLoadable")}valueMaybe(){throw M("BaseLoadable")}valueOrThrow(){throw M(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw M("BaseLoadable")}promiseOrThrow(){throw M(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw M("BaseLoadable")}errorOrThrow(){throw M(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw M("BaseLoadable")}}class Ss extends Bt{constructor(e){super(),x(this,"state","hasValue"),x(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return oe(n)?qe(n):rt(n)?n:Rt(n)}catch(n){return oe(n)?qe(n.next(()=>this.map(e))):Ft(n)}}}class Rs extends Bt{constructor(e){super(),x(this,"state","hasError"),x(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class vo extends Bt{constructor(e){super(),x(this,"state","loading"),x(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return qe(this.contents.then(n=>{const o=e(n);if(rt(o)){const r=o;switch(r.state){case"hasValue":return r.contents;case"hasError":throw r.contents;case"loading":return r.contents}}return o}).catch(n=>{if(oe(n))return n.then(()=>this.map(e).contents);throw n}))}}function Rt(t){return Object.freeze(new Ss(t))}function Ft(t){return Object.freeze(new Rs(t))}function qe(t){return Object.freeze(new vo(t))}function _o(){return Object.freeze(new vo(new Promise(()=>{})))}function ys(t){return t.every(e=>e.state==="hasValue")?Rt(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Ft(ue(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):qe(Promise.all(t.map(e=>e.contents)))}function mo(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(r=>t[r])).map(r=>rt(r)?r:oe(r)?qe(r):Rt(r)),o=ys(n);return Array.isArray(t)?o:o.map(r=>Object.getOwnPropertyNames(t).reduce((s,a,u)=>({...s,[a]:r[u]}),{}))}function rt(t){return t instanceof Bt}var Ze={loadableWithValue:Rt,loadableWithError:Ft,loadableWithPromise:qe,loadableLoading:_o,loadableAll:mo,isLoadable:rt,RecoilLoadable:{of:t=>oe(t)?qe(t):rt(t)?t:Rt(t),error:t=>Ft(t),loading:()=>_o(),all:mo,isLoadable:rt}},gs=Ze.loadableWithValue,bs=Ze.loadableWithError,Ts=Ze.loadableWithPromise,Es=Ze.loadableLoading,ws=Ze.loadableAll,Ns=Ze.isLoadable,As=Ze.RecoilLoadable,yt=Object.freeze({__proto__:null,loadableWithValue:gs,loadableWithError:bs,loadableWithPromise:Ts,loadableLoading:Es,loadableAll:ws,isLoadable:Ns,RecoilLoadable:As});const wn={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Cs(t,e){var n,o;const r=(n=process.env[t])===null||n===void 0||(o=n.toLowerCase())===null||o===void 0?void 0:o.trim();if(r==null||r==="")return;if(!["true","false"].includes(r))throw M(`process.env.${t} value must be 'true', 'false', or empty: ${r}`);e(r==="true")}function Ls(t,e){var n;const o=(n=process.env[t])===null||n===void 0?void 0:n.trim();o==null||o===""||e(o.split(/\s*,\s*|\s+/))}function Vs(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(Cs("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{wn.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),Ls("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{wn.RECOIL_GKS_ENABLED.add(n)})}))}Vs();var st=wn;function Wt(t){return st.RECOIL_GKS_ENABLED.has(t)}Wt.setPass=t=>{st.RECOIL_GKS_ENABLED.add(t)},Wt.setFail=t=>{st.RECOIL_GKS_ENABLED.delete(t)},Wt.clear=()=>{st.RECOIL_GKS_ENABLED.clear()};var re=Wt;function ks(t,e,{error:n}={}){return process.env.NODE_ENV!=="production"&&console.error(t,n),null}var Is=ks,Se=Is,Nn,An,Cn;const Ps=(Nn=g.createMutableSource)!==null&&Nn!==void 0?Nn:g.unstable_createMutableSource,So=(An=g.useMutableSource)!==null&&An!==void 0?An:g.unstable_useMutableSource,Ln=(Cn=g.useSyncExternalStore)!==null&&Cn!==void 0?Cn:g.unstable_useSyncExternalStore;let Ro=!1;function Ds(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null;return Ln&&!r&&!Ro&&(Ro=!0,Se("A React renderer without React 18+ API support is being used with React 18+.")),r}function $s(){return re("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:re("recoil_sync_external_store")&&Ln!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:re("recoil_mutable_source")&&So!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?re("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:re("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function Os(){return!1}var at={createMutableSource:Ps,useMutableSource:So,useSyncExternalStore:Ln,currentRendererSupportsUseSyncExternalStore:Ds,reactMode:$s,isFastRefreshEnabled:Os};class Vn{constructor(e){x(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class yo extends Vn{}class go extends Vn{}function Ms(t){return t instanceof yo||t instanceof go}var zt={AbstractRecoilValue:Vn,RecoilState:yo,RecoilValueReadOnly:go,isRecoilValue:Ms},Us=zt.AbstractRecoilValue,xs=zt.RecoilState,Bs=zt.RecoilValueReadOnly,Fs=zt.isRecoilValue,Je=Object.freeze({__proto__:null,AbstractRecoilValue:Us,RecoilState:xs,RecoilValueReadOnly:Bs,isRecoilValue:Fs});function Ws(t,...e){let n=0;return t.replace(/%s/g,()=>String(e[n++]))}var zs=Ws;function js(t,...e){if(process.env.NODE_ENV!=="production"){const n=zs.call(null,t,...e),o=new Error(n);o.name="Expectation Violation",console.error(o)}}var Gs=js,jt=Gs;function Ks(t,e){return function*(){let n=0;for(const o of t)yield e(o,n++)}()}var Gt=Ks;const{isFastRefreshEnabled:Hs}=at;class bo{}const Ys=new bo,Xe=new Map,kn=new Map;function qs(t){return Gt(t,e=>ue(kn.get(e)))}function Zs(t){if(Xe.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;process.env.NODE_ENV!=="production"?Hs()||jt(e,"recoil"):console.warn(e)}}function Js(t){st.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&Zs(t.key),Xe.set(t.key,t);const e=t.set==null?new Je.RecoilValueReadOnly(t.key):new Je.RecoilState(t.key);return kn.set(t.key,e),e}class To extends Error{}function Xs(t){const e=Xe.get(t);if(e==null)throw new To(`Missing definition for RecoilValue: "${t}""`);return e}function Qs(t){return Xe.get(t)}const Kt=new Map;function ea(t){var e;if(!re("recoil_memory_managament_2020"))return;const n=Xe.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var o;Xe.delete(t),(o=Eo(t))===null||o===void 0||o(),Kt.delete(t)}}function ta(t,e){re("recoil_memory_managament_2020")&&(e===void 0?Kt.delete(t):Kt.set(t,e))}function Eo(t){return Kt.get(t)}var we={nodes:Xe,recoilValues:kn,registerNode:Js,getNode:Xs,getNodeMaybe:Qs,deleteNodeConfigIfPossible:ea,setConfigDeletionHandler:ta,getConfigDeletionHandler:Eo,recoilValuesForKeys:qs,NodeMissingError:To,DefaultValue:bo,DEFAULT_VALUE:Ys};function na(t,e){e()}var oa={enqueueExecution:na};function ra(t,e){return e={exports:{}},t(e,e.exports),e.exports}var sa=ra(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},n={},o=5,r=Math.pow(2,o),s=r-1,a=r/2,u=r/4,l={},d=function(c){return function(){return c}},p=n.hash=function(f){var c=typeof f>"u"?"undefined":e(f);if(c==="number")return f;c!=="string"&&(f+="");for(var _=0,E=0,b=f.length;E<b;++E){var N=f.charCodeAt(E);_=(_<<5)-_+N|0}return _},v=function(c){return c-=c>>1&1431655765,c=(c&858993459)+(c>>2&858993459),c=c+(c>>4)&252645135,c+=c>>8,c+=c>>16,c&127},A=function(c,_){return _>>>c&s},V=function(c){return 1<<c},R=function(c,_){return v(c&_-1)},C=function(c,_,E,b){var N=b;if(!c){var P=b.length;N=new Array(P);for(var D=0;D<P;++D)N[D]=b[D]}return N[_]=E,N},W=function(c,_,E){var b=E.length-1,N=0,P=0,D=E;if(c)N=P=_;else for(D=new Array(b);N<_;)D[P++]=E[N++];for(++N;N<=b;)D[P++]=E[N++];return c&&(D.length=b),D},G=function(c,_,E,b){var N=b.length;if(c){for(var P=N;P>=_;)b[P--]=b[P];return b[_]=E,b}for(var D=0,$=0,z=new Array(N+1);D<_;)z[$++]=b[D++];for(z[_]=E;D<N;)z[++$]=b[D++];return z},S=1,k=2,B=3,K=4,Z={__hamt_isEmpty:!0},Q=function(c){return c===Z||c&&c.__hamt_isEmpty},le=function(c,_,E,b){return{type:S,edit:c,hash:_,key:E,value:b,_modify:Fe}},ye=function(c,_,E){return{type:k,edit:c,hash:_,children:E,_modify:We}},H=function(c,_,E){return{type:B,edit:c,mask:_,children:E,_modify:q}},_e=function(c,_,E){return{type:K,edit:c,size:_,children:E,_modify:X}},Ue=function(c){return c===Z||c.type===S||c.type===k},se=function(c,_,E,b,N){for(var P=[],D=b,$=0,z=0;D;++z)D&1&&(P[z]=N[$++]),D>>>=1;return P[_]=E,_e(c,$+1,P)},de=function(c,_,E,b){for(var N=new Array(_-1),P=0,D=0,$=0,z=b.length;$<z;++$)if($!==E){var ie=b[$];ie&&!Q(ie)&&(N[P++]=ie,D|=1<<$)}return H(c,D,N)},ke=function f(c,_,E,b,N,P){if(E===N)return ye(c,E,[P,b]);var D=A(_,E),$=A(_,N);return H(c,V(D)|V($),D===$?[f(c,_+o,E,b,N,P)]:D<$?[b,P]:[P,b])},Be=function(c,_,E,b,N,P,D,$){for(var z=N.length,ie=0;ie<z;++ie){var Re=N[ie];if(E(D,Re.key)){var pe=Re.value,Te=P(pe);return Te===pe?N:Te===l?(--$.value,W(c,ie,N)):C(c,ie,le(_,b,D,Te),N)}}var Ce=P();return Ce===l?N:(++$.value,C(c,z,le(_,b,D,Ce),N))},Ie=function(c,_){return c===_.edit},Fe=function(c,_,E,b,N,P,D){if(_(P,this.key)){var $=b(this.value);return $===this.value?this:$===l?(--D.value,Z):Ie(c,this)?(this.value=$,this):le(c,N,P,$)}var z=b();return z===l?this:(++D.value,ke(c,E,this.hash,this,N,le(c,N,P,z)))},We=function(c,_,E,b,N,P,D){if(N===this.hash){var $=Ie(c,this),z=Be($,c,_,this.hash,this.children,b,P,D);return z===this.children?this:z.length>1?ye(c,this.hash,z):z[0]}var ie=b();return ie===l?this:(++D.value,ke(c,E,this.hash,this,N,le(c,N,P,ie)))},q=function(c,_,E,b,N,P,D){var $=this.mask,z=this.children,ie=A(E,N),Re=V(ie),pe=R($,Re),Te=$&Re,Ce=Te?z[pe]:Z,He=Ce._modify(c,_,E+o,b,N,P,D);if(Ce===He)return this;var vt=Ie(c,this),Ye=$,ot=void 0;if(Te&&Q(He)){if(Ye&=~Re,!Ye)return Z;if(z.length<=2&&Ue(z[pe^1]))return z[pe^1];ot=W(vt,pe,z)}else if(!Te&&!Q(He)){if(z.length>=a)return se(c,ie,He,$,z);Ye|=Re,ot=G(vt,pe,He,z)}else ot=C(vt,pe,He,z);return vt?(this.mask=Ye,this.children=ot,this):H(c,Ye,ot)},X=function(c,_,E,b,N,P,D){var $=this.size,z=this.children,ie=A(E,N),Re=z[ie],pe=(Re||Z)._modify(c,_,E+o,b,N,P,D);if(Re===pe)return this;var Te=Ie(c,this),Ce=void 0;if(Q(Re)&&!Q(pe))++$,Ce=C(Te,ie,pe,z);else if(!Q(Re)&&Q(pe)){if(--$,$<=u)return de(c,$,ie,z);Ce=C(Te,ie,Z,z)}else Ce=C(Te,ie,pe,z);return Te?(this.size=$,this.children=Ce,this):_e(c,$,Ce)};Z._modify=function(f,c,_,E,b,N,P){var D=E();return D===l?Z:(++P.value,le(f,b,N,D))};function h(f,c,_,E,b){this._editable=f,this._edit=c,this._config=_,this._root=E,this._size=b}h.prototype.setTree=function(f,c){return this._editable?(this._root=f,this._size=c,this):f===this._root?this:new h(this._editable,this._edit,this._config,f,c)};var y=n.tryGetHash=function(f,c,_,E){for(var b=E._root,N=0,P=E._config.keyEq;;)switch(b.type){case S:return P(_,b.key)?b.value:f;case k:{if(c===b.hash)for(var D=b.children,$=0,z=D.length;$<z;++$){var ie=D[$];if(P(_,ie.key))return ie.value}return f}case B:{var Re=A(N,c),pe=V(Re);if(b.mask&pe){b=b.children[R(b.mask,pe)],N+=o;break}return f}case K:{if(b=b.children[A(N,c)],b){N+=o;break}return f}default:return f}};h.prototype.tryGetHash=function(f,c,_){return y(f,c,_,this)};var T=n.tryGet=function(f,c,_){return y(f,_._config.hash(c),c,_)};h.prototype.tryGet=function(f,c){return T(f,c,this)};var U=n.getHash=function(f,c,_){return y(void 0,f,c,_)};h.prototype.getHash=function(f,c){return U(f,c,this)},n.get=function(f,c){return y(void 0,c._config.hash(f),f,c)},h.prototype.get=function(f,c){return T(c,f,this)};var L=n.has=function(f,c,_){return y(l,f,c,_)!==l};h.prototype.hasHash=function(f,c){return L(f,c,this)};var j=n.has=function(f,c){return L(c._config.hash(f),f,c)};h.prototype.has=function(f){return j(f,this)};var F=function(c,_){return c===_};n.make=function(f){return new h(0,0,{keyEq:f&&f.keyEq||F,hash:f&&f.hash||p},Z,0)},n.empty=n.make();var I=n.isEmpty=function(f){return f&&!!Q(f._root)};h.prototype.isEmpty=function(){return I(this)};var ne=n.modifyHash=function(f,c,_,E){var b={value:E._size},N=E._root._modify(E._editable?E._edit:NaN,E._config.keyEq,0,f,c,_,b);return E.setTree(N,b.value)};h.prototype.modifyHash=function(f,c,_){return ne(_,f,c,this)};var fe=n.modify=function(f,c,_){return ne(f,_._config.hash(c),c,_)};h.prototype.modify=function(f,c){return fe(c,f,this)};var ee=n.setHash=function(f,c,_,E){return ne(d(_),f,c,E)};h.prototype.setHash=function(f,c,_){return ee(f,c,_,this)};var ce=n.set=function(f,c,_){return ee(_._config.hash(f),f,c,_)};h.prototype.set=function(f,c){return ce(f,c,this)};var Ae=d(l),Pe=n.removeHash=function(f,c,_){return ne(Ae,f,c,_)};h.prototype.removeHash=h.prototype.deleteHash=function(f,c){return Pe(f,c,this)};var me=n.remove=function(f,c){return Pe(c._config.hash(f),f,c)};h.prototype.remove=h.prototype.delete=function(f){return me(f,this)};var ge=n.beginMutation=function(f){return new h(f._editable+1,f._edit+1,f._config,f._root,f._size)};h.prototype.beginMutation=function(){return ge(this)};var Ot=n.endMutation=function(f){return f._editable=f._editable&&f._editable-1,f};h.prototype.endMutation=function(){return Ot(this)};var ft=n.mutate=function(f,c){var _=ge(c);return f(_),Ot(_)};h.prototype.mutate=function(f){return ft(f,this)};var Mt=function(c){return c&&Sn(c[0],c[1],c[2],c[3],c[4])},Sn=function(c,_,E,b,N){for(;E<c;){var P=_[E++];if(P&&!Q(P))return ht(P,b,[c,_,E,b,N])}return Mt(N)},ht=function(c,_,E){switch(c.type){case S:return{value:_(c),rest:E};case k:case K:case B:var b=c.children;return Sn(b.length,b,0,_,E);default:return Mt(E)}},co={done:!0};function Ut(f){this.v=f}Ut.prototype.next=function(){if(!this.v)return co;var f=this.v;return this.v=Mt(f.rest),f},Ut.prototype[Symbol.iterator]=function(){return this};var pt=function(c,_){return new Ut(ht(c._root,_))},Rn=function(c){return[c.key,c.value]},nt=n.entries=function(f){return pt(f,Rn)};h.prototype.entries=h.prototype[Symbol.iterator]=function(){return nt(this)};var uo=function(c){return c.key},yn=n.keys=function(f){return pt(f,uo)};h.prototype.keys=function(){return yn(this)};var gn=function(c){return c.value},xt=n.values=h.prototype.values=function(f){return pt(f,gn)};h.prototype.values=function(){return xt(this)};var bn=n.fold=function(f,c,_){var E=_._root;if(E.type===S)return f(c,E.value,E.key);for(var b=[E.children],N=void 0;N=b.pop();)for(var P=0,D=N.length;P<D;){var $=N[P++];$&&$.type&&($.type===S?c=f(c,$.value,$.key):b.push($.children))}return c};h.prototype.fold=function(f,c){return bn(f,c,this)};var lo=n.forEach=function(f,c){return bn(function(_,E,b){return f(E,b,c)},null,c)};h.prototype.forEach=function(f){return lo(f,this)};var fo=n.count=function(f){return f._size};h.prototype.count=function(){return fo(this)},Object.defineProperty(h.prototype,"size",{get:h.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class aa{constructor(e){x(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return Pn(this)}toMap(){return new Map(this._map)}}class In{constructor(e){if(x(this,"_hamt",sa.empty.beginMutation()),e instanceof In){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,o]of e.entries())this._hamt.set(n,o)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return Pn(this)}toMap(){return new Map(this._hamt)}}function Pn(t){return re("recoil_hamt_2020")?new In(t):new aa(t)}var ia={persistentMap:Pn},ca=ia.persistentMap,ua=Object.freeze({__proto__:null,persistentMap:ca});function la(t,...e){const n=new Set;e:for(const o of t){for(const r of e)if(r.has(o))continue e;n.add(o)}return n}var gt=la;function da(t,e){const n=new Map;return t.forEach((o,r)=>{n.set(r,e(o,r))}),n}var Ht=da;function fa(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function ha(t){return{nodeDeps:Ht(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Ht(t.nodeToNodeSubscriptions,e=>new Set(e))}}function Dn(t,e,n,o){const{nodeDeps:r,nodeToNodeSubscriptions:s}=n,a=r.get(t);if(a&&o&&a!==o.nodeDeps.get(t))return;r.set(t,e);const u=a==null?e:gt(e,a);for(const l of u)s.has(l)||s.set(l,new Set),ue(s.get(l)).add(t);if(a){const l=gt(a,e);for(const d of l){if(!s.has(d))return;const p=ue(s.get(d));p.delete(t),p.size===0&&s.delete(d)}}}function pa(t,e,n,o){var r,s,a,u;const l=n.getState();o===l.currentTree.version||o===((r=l.nextTree)===null||r===void 0?void 0:r.version)||o===((s=l.previousTree)===null||s===void 0?void 0:s.version)||Se("Tried to save dependencies to a discarded tree");const d=n.getGraph(o);if(Dn(t,e,d),o===((a=l.previousTree)===null||a===void 0?void 0:a.version)){const v=n.getGraph(l.currentTree.version);Dn(t,e,v,d)}if(o===((u=l.previousTree)===null||u===void 0?void 0:u.version)||o===l.currentTree.version){var p;const v=(p=l.nextTree)===null||p===void 0?void 0:p.version;if(v!==void 0){const A=n.getGraph(v);Dn(t,e,A,d)}}}var bt={cloneGraph:ha,graph:fa,saveDepsToStore:pa};let va=0;const _a=()=>va++;let ma=0;const Sa=()=>ma++;let Ra=0;var Yt={getNextTreeStateVersion:_a,getNextStoreID:Sa,getNextComponentID:()=>Ra++};const{persistentMap:wo}=ua,{graph:ya}=bt,{getNextTreeStateVersion:No}=Yt;function Ao(){const t=No();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:wo(),nonvalidatedAtoms:wo()}}function ga(){const t=Ao();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,ya()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Co={makeEmptyTreeState:Ao,makeEmptyStoreState:ga,getNextTreeStateVersion:No};class Lo{}function ba(){return new Lo}var qt={RetentionZone:Lo,retentionZone:ba};function Ta(t,e){const n=new Set(t);return n.add(e),n}function Ea(t,e){const n=new Set(t);return n.delete(e),n}function wa(t,e,n){const o=new Map(t);return o.set(e,n),o}function Na(t,e,n){const o=new Map(t);return o.set(e,n(o.get(e))),o}function Aa(t,e){const n=new Map(t);return n.delete(e),n}function Ca(t,e){const n=new Map(t);return e.forEach(o=>n.delete(o)),n}var Vo={setByAddingToSet:Ta,setByDeletingFromSet:Ea,mapBySettingInMap:wa,mapByUpdatingInMap:Na,mapByDeletingFromMap:Aa,mapByDeletingMultipleFromMap:Ca};function*La(t,e){let n=0;for(const o of t)e(o,n++)&&(yield o)}var $n=La;function Va(t,e){return new Proxy(t,{get:(o,r)=>(!(r in o)&&r in e&&(o[r]=e[r]()),o[r]),ownKeys:o=>Object.keys(o)})}var ko=Va;const{getNode:Tt,getNodeMaybe:ka,recoilValuesForKeys:Io}=we,{RetentionZone:Po}=qt,{setByAddingToSet:Ia}=Vo,Pa=Object.freeze(new Set);class Da extends Error{}function $a(t,e,n){if(!re("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:o}=t.getState().retention;function r(s){let a=o.get(s);a||o.set(s,a=new Set),a.add(e)}if(n instanceof Po)r(n);else if(Array.isArray(n))for(const s of n)r(s);return()=>{if(!re("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function a(u){const l=s.nodesRetainedByZone.get(u);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(u)}if(n instanceof Po)a(n);else if(Array.isArray(n))for(const u of n)a(u)}}function On(t,e,n,o){const r=t.getState();if(r.nodeCleanupFunctions.has(n))return;const s=Tt(n),a=$a(t,n,s.retainedBy),u=s.init(t,e,o);r.nodeCleanupFunctions.set(n,()=>{u(),a()})}function Oa(t,e,n){On(t,t.getState().currentTree,e,n)}function Ma(t,e){var n;const o=t.getState();(n=o.nodeCleanupFunctions.get(e))===null||n===void 0||n(),o.nodeCleanupFunctions.delete(e)}function Ua(t,e,n){return On(t,e,n,"get"),Tt(n).get(t,e)}function Do(t,e,n){return Tt(n).peek(t,e)}function xa(t,e,n){var o;const r=ka(e);return r==null||(o=r.invalidate)===null||o===void 0||o.call(r,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:Ia(t.dirtyAtoms,e)}}function Ba(t,e,n,o){const r=Tt(n);if(r.set==null)throw new Da(`Attempt to set read-only RecoilValue: ${n}`);const s=r.set;return On(t,e,n,"set"),s(t,e,o)}function Fa(t,e,n){const o=t.getState(),r=t.getGraph(e.version),s=Tt(n).nodeType;return ko({type:s},{loadable:()=>Do(t,e,n),isActive:()=>o.knownAtoms.has(n)||o.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var a;return Io((a=r.nodeDeps.get(n))!==null&&a!==void 0?a:[])},subscribers:()=>{var a,u;return{nodes:Io($n($o(t,e,new Set([n])),l=>l!==n)),components:Gt((a=(u=o.nodeToComponentSubscriptions.get(n))===null||u===void 0?void 0:u.values())!==null&&a!==void 0?a:[],([l])=>({name:l}))}}})}function $o(t,e,n){const o=new Set,r=Array.from(n),s=t.getGraph(e.version);for(let u=r.pop();u;u=r.pop()){var a;o.add(u);const l=(a=s.nodeToNodeSubscriptions.get(u))!==null&&a!==void 0?a:Pa;for(const d of l)o.has(d)||r.push(d)}return o}var je={getNodeLoadable:Ua,peekNodeLoadable:Do,setNodeValue:Ba,initializeNode:Oa,cleanUpNode:Ma,setUnvalidatedAtomValue_DEPRECATED:xa,peekNodeInfo:Fa,getDownstreamNodes:$o};let Oo=null;function Wa(t){Oo=t}function za(){var t;(t=Oo)===null||t===void 0||t()}var Mo={setInvalidateMemoizedSnapshot:Wa,invalidateMemoizedSnapshot:za};const{getDownstreamNodes:ja,getNodeLoadable:Uo,setNodeValue:Ga}=je,{getNextComponentID:Ka}=Yt,{getNode:Ha,getNodeMaybe:xo}=we,{DefaultValue:Mn}=we,{reactMode:Ya}=at,{AbstractRecoilValue:qa,RecoilState:Za,RecoilValueReadOnly:Ja,isRecoilValue:Xa}=Je,{invalidateMemoizedSnapshot:Qa}=Mo;function ei(t,{key:e},n=t.getState().currentTree){var o,r;const s=t.getState();n.version===s.currentTree.version||n.version===((o=s.nextTree)===null||o===void 0?void 0:o.version)||n.version===((r=s.previousTree)===null||r===void 0?void 0:r.version)||Se("Tried to read from a discarded tree");const a=Uo(t,n,e);return a.state==="loading"&&a.contents.catch(()=>{}),a}function ti(t,e){const n=t.clone();return e.forEach((o,r)=>{o.state==="hasValue"&&o.contents instanceof Mn?n.delete(r):n.set(r,o)}),n}function ni(t,e,{key:n},o){if(typeof o=="function"){const r=Uo(t,e,n);if(r.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Se(s),M(s)}else if(r.state==="hasError")throw r.contents;return o(r.contents)}else return o}function oi(t,e,n){if(n.type==="set"){const{recoilValue:r,valueOrUpdater:s}=n,a=ni(t,e,r,s),u=Ga(t,e,r.key,a);for(const[l,d]of u.entries())Un(e,l,d)}else if(n.type==="setLoadable"){const{recoilValue:{key:r},loadable:s}=n;Un(e,r,s)}else if(n.type==="markModified"){const{recoilValue:{key:r}}=n;e.dirtyAtoms.add(r)}else if(n.type==="setUnvalidated"){var o;const{recoilValue:{key:r},unvalidatedValue:s}=n,a=xo(r);a==null||(o=a.invalidate)===null||o===void 0||o.call(a,e),e.atomValues.delete(r),e.nonvalidatedAtoms.set(r,s),e.dirtyAtoms.add(r)}else Se(`Unknown action ${n.type}`)}function Un(t,e,n){n.state==="hasValue"&&n.contents instanceof Mn?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function Bo(t,e){t.replaceState(n=>{const o=Fo(n);for(const r of e)oi(t,o,r);return Wo(t,o),Qa(),o})}function Zt(t,e){if(Et.length){const n=Et[Et.length-1];let o=n.get(t);o||n.set(t,o=[]),o.push(e)}else Bo(t,[e])}const Et=[];function ri(){const t=new Map;return Et.push(t),()=>{for(const[n,o]of t)Bo(n,o);Et.pop()!==t&&Se("Incorrect order of batch popping")}}function Fo(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function Wo(t,e){const n=ja(t,e,e.dirtyAtoms);for(const s of n){var o,r;(o=xo(s))===null||o===void 0||(r=o.invalidate)===null||r===void 0||r.call(o,e)}}function zo(t,e,n){Zt(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function si(t,e,n){if(n instanceof Mn)return zo(t,e,n);Zt(t,{type:"setLoadable",recoilValue:e,loadable:n})}function ai(t,e){Zt(t,{type:"markModified",recoilValue:e})}function ii(t,e,n){Zt(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function ci(t,{key:e},n,o=null){const r=Ka(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),ue(s.nodeToComponentSubscriptions.get(e)).set(r,[o??"<not captured>",n]);const a=Ya();if(a.early&&(a.mode==="LEGACY"||a.mode==="MUTABLE_SOURCE")){const u=t.getState().nextTree;u&&u.dirtyAtoms.has(e)&&n(u)}return{release:()=>{const u=t.getState(),l=u.nodeToComponentSubscriptions.get(e);if(l===void 0||!l.has(r)){Se(`Subscription missing at release time for atom ${e}. This is a bug in Recoil.`);return}l.delete(r),l.size===0&&u.nodeToComponentSubscriptions.delete(e)}}}function ui(t,e){var n;const{currentTree:o}=t.getState(),r=Ha(e.key);(n=r.clearCache)===null||n===void 0||n.call(r,t,o)}var $e={RecoilValueReadOnly:Ja,AbstractRecoilValue:qa,RecoilState:Za,getRecoilValueAsLoadable:ei,setRecoilValue:zo,setRecoilValueLoadable:si,markRecoilValueModified:ai,setUnvalidatedRecoilValue:ii,subscribeToRecoilValue:ci,isRecoilValue:Xa,applyAtomValueWrites:ti,batchStart:ri,writeLoadableToTreeState:Un,invalidateDownstreams:Wo,copyTreeState:Fo,refreshRecoilValue:ui};function li(t,e,n){const o=t.entries();let r=o.next();for(;!r.done;){const s=r.value;if(e.call(n,s[1],s[0],t))return!0;r=o.next()}return!1}var di=li;const{cleanUpNode:fi}=je,{deleteNodeConfigIfPossible:hi,getNode:jo}=we,{RetentionZone:Go}=qt,pi=12e4,Ko=new Set;function Ho(t,e){const n=t.getState(),o=n.currentTree;if(n.nextTree){Se("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}const r=new Set;for(const a of e)if(a instanceof Go)for(const u of Si(n,a))r.add(u);else r.add(a);const s=vi(t,r);for(const a of s)mi(t,o,a)}function vi(t,e){const n=t.getState(),o=n.currentTree,r=t.getGraph(o.version),s=new Set,a=new Set;return u(e),s;function u(l){const d=new Set,p=_i(t,o,l,s,a);for(const R of p){var v;if(jo(R).retainedBy==="recoilRoot"){a.add(R);continue}if(((v=n.retention.referenceCounts.get(R))!==null&&v!==void 0?v:0)>0){a.add(R);continue}if(Yo(R).some(W=>n.retention.referenceCounts.get(W))){a.add(R);continue}const C=r.nodeToNodeSubscriptions.get(R);if(C&&di(C,W=>a.has(W))){a.add(R);continue}s.add(R),d.add(R)}const A=new Set;for(const R of d)for(const C of(V=r.nodeDeps.get(R))!==null&&V!==void 0?V:Ko){var V;s.has(C)||A.add(C)}A.size&&u(A)}}function _i(t,e,n,o,r){const s=t.getGraph(e.version),a=[],u=new Set;for(;n.size>0;)l(ue(n.values().next().value));return a;function l(d){if(o.has(d)||r.has(d)){n.delete(d);return}if(u.has(d))return;const p=s.nodeToNodeSubscriptions.get(d);if(p)for(const v of p)l(v);u.add(d),n.delete(d),a.push(d)}}function mi(t,e,n){if(!re("recoil_memory_managament_2020"))return;fi(t,n);const o=t.getState();o.knownAtoms.delete(n),o.knownSelectors.delete(n),o.nodeTransactionSubscriptions.delete(n),o.retention.referenceCounts.delete(n);const r=Yo(n);for(const l of r){var s;(s=o.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const a=o.graphsByVersion.get(e.version);if(a){const l=a.nodeDeps.get(n);if(l!==void 0){a.nodeDeps.delete(n);for(const d of l){var u;(u=a.nodeToNodeSubscriptions.get(d))===null||u===void 0||u.delete(n)}}a.nodeToNodeSubscriptions.delete(n)}hi(n)}function Si(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:Ko}function Yo(t){const e=jo(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof Go?[e]:e}function Ri(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):Ho(t,new Set([e]))}function yi(t,e,n){var o;if(!re("recoil_memory_managament_2020"))return;const r=t.getState().retention.referenceCounts,s=((o=r.get(e))!==null&&o!==void 0?o:0)+n;s===0?qo(t,e):r.set(e,s)}function qo(t,e){if(!re("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),Ri(t,e)}function gi(t){if(!re("recoil_memory_managament_2020"))return;const e=t.getState();Ho(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function bi(t){return t===void 0?"recoilRoot":t}var Qe={SUSPENSE_TIMEOUT_MS:pi,updateRetainCount:yi,updateRetainCountToZero:qo,releaseScheduledRetainablesNow:gi,retainedByOptionWithDefault:bi};const{unstable_batchedUpdates:Ti}=ds;var Ei={unstable_batchedUpdates:Ti};const{unstable_batchedUpdates:wi}=Ei;var Ni={unstable_batchedUpdates:wi};const{batchStart:Ai}=$e,{unstable_batchedUpdates:Ci}=Ni;let xn=Ci||(t=>t());var Jt={getBatcher:()=>xn,setBatcher:t=>{xn=t},batchUpdates:t=>{xn(()=>{let e=()=>{};try{e=Ai(),t()}finally{e()}})}};function*Li(t){for(const e of t)for(const n of e)yield n}var Zo=Li;const Jo=typeof Window>"u"||typeof window>"u",Vi=t=>!Jo&&(t===window||t instanceof Window),ki=typeof navigator<"u"&&navigator.product==="ReactNative";var wt={isSSR:Jo,isReactNative:ki,isWindow:Vi};function Ii(t,e){let n;return(...o)=>{n||(n={});const r=e(...o);return Object.hasOwnProperty.call(n,r)||(n[r]=t(...o)),n[r]}}function Pi(t,e){let n,o;return(...r)=>{const s=e(...r);return n===s||(n=s,o=t(...r)),o}}function Di(t,e){let n,o;return[(...a)=>{const u=e(...a);return n===u||(n=u,o=t(...a)),o},()=>{n=null}]}var $i={memoizeWithArgsHash:Ii,memoizeOneWithArgsHash:Pi,memoizeOneWithArgsHashAndInvalidation:Di};const{batchUpdates:Bn}=Jt,{initializeNode:Oi,peekNodeInfo:Mi}=je,{graph:Ui}=bt,{getNextStoreID:xi}=Yt,{DEFAULT_VALUE:Bi,recoilValues:Xo,recoilValuesForKeys:Qo}=we,{AbstractRecoilValue:Fi,getRecoilValueAsLoadable:Wi,setRecoilValue:er,setUnvalidatedRecoilValue:zi}=$e,{updateRetainCount:Xt}=Qe,{setInvalidateMemoizedSnapshot:ji}=Mo,{getNextTreeStateVersion:Gi,makeEmptyStoreState:Ki}=Co,{isSSR:Hi}=wt,{memoizeOneWithArgsHashAndInvalidation:Yi}=$i,qi=`
Recoil Snapshots only last for the duration of the callback they are provided to. To keep a Snapshot longer, do this:

  const release = snapshot.retain();
  try {
    await doSomethingWithSnapshot(snapshot);
  } finally {
    release();
  }

This is currently a DEV-only warning but will become a thrown exception in the next release of Recoil.
`;class Qt{constructor(e,n){x(this,"_store",void 0),x(this,"_refCount",1),x(this,"getLoadable",o=>(this.checkRefCount_INTERNAL(),Wi(this._store,o))),x(this,"getPromise",o=>(this.checkRefCount_INTERNAL(),this.getLoadable(o).toPromise())),x(this,"getNodes_UNSTABLE",o=>{if(this.checkRefCount_INTERNAL(),(o==null?void 0:o.isModified)===!0){if((o==null?void 0:o.isInitialized)===!1)return[];const a=this._store.getState().currentTree;return Qo(a.dirtyAtoms)}const r=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(o==null?void 0:o.isInitialized)==null?Xo.values():o.isInitialized===!0?Qo(Zo([r,s])):$n(Xo.values(),({key:a})=>!r.has(a)&&!s.has(a))}),x(this,"getInfo_UNSTABLE",({key:o})=>(this.checkRefCount_INTERNAL(),Mi(this._store,this._store.getState().currentTree,o))),x(this,"map",o=>{this.checkRefCount_INTERNAL();const r=new Fn(this,Bn);return o(r),r}),x(this,"asyncMap",async o=>{this.checkRefCount_INTERNAL();const r=new Fn(this,Bn);return r.retain(),await o(r),r.autoRelease_INTERNAL(),r}),this._store={storeID:xi(),parentStoreID:n,getState:()=>e,replaceState:o=>{e.currentTree=o(e.currentTree)},getGraph:o=>{const r=e.graphsByVersion;if(r.has(o))return ue(r.get(o));const s=Ui();return r.set(o,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw M("Cannot subscribe to Snapshots")}};for(const o of this._store.getState().knownAtoms)Oi(this._store,o,"get"),Xt(this._store,o,1);this.autoRelease_INTERNAL()}retain(){if(this._refCount<=0){if(process.env.NODE_ENV!=="production")throw M("Snapshot has already been released.");Se("Attempt to retain() Snapshot that was already released.")}this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){Hi||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!re("recoil_memory_managament_2020"))return}else this._refCount<0&&process.env.NODE_ENV!=="production"&&Se("Snapshot released an extra time.")}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){re("recoil_memory_managament_2020")&&this._refCount<=0&&process.env.NODE_ENV!=="production"&&Se(qi)}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function tr(t,e,n=!1){const o=t.getState(),r=n?Gi():e.version;return{currentTree:{version:n?r:e.version,stateID:n?r:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(o.knownAtoms),knownSelectors:new Set(o.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(r,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Gt(o.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function Zi(t){const e=new Qt(Ki());return t!=null?e.map(t):e}const[nr,or]=Yi((t,e)=>{var n;const o=t.getState(),r=e==="latest"?(n=o.nextTree)!==null&&n!==void 0?n:o.currentTree:ue(o.previousTree);return new Qt(tr(t,r),t.storeID)},(t,e)=>{var n,o;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((o=t.getState().previousTree)===null||o===void 0?void 0:o.version)});ji(or);function Ji(t,e="latest"){const n=nr(t,e);return n.isRetained()?n:(or(),nr(t,e))}class Fn extends Qt{constructor(e,n){super(tr(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),x(this,"_batch",void 0),x(this,"set",(o,r)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Xt(s,o.key,1),er(this.getStore_INTERNAL(),o,r)})}),x(this,"reset",o=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();this._batch(()=>{Xt(r,o.key,1),er(this.getStore_INTERNAL(),o,Bi)})}),x(this,"setUnvalidatedAtomValues_DEPRECATED",o=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();Bn(()=>{for(const[s,a]of o.entries())Xt(r,s,1),zi(r,new Fi(s),a)})}),this._batch=n}}var en={Snapshot:Qt,MutableSnapshot:Fn,freshSnapshot:Zi,cloneSnapshot:Ji},Xi=en.Snapshot,Qi=en.MutableSnapshot,ec=en.freshSnapshot,tc=en.cloneSnapshot,tn=Object.freeze({__proto__:null,Snapshot:Xi,MutableSnapshot:Qi,freshSnapshot:ec,cloneSnapshot:tc});function nc(...t){const e=new Set;for(const n of t)for(const o of n)e.add(o);return e}var oc=nc;const{useRef:rc}=g;function sc(t){const e=rc(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var rr=sc;const{getNextTreeStateVersion:ac,makeEmptyStoreState:sr}=Co,{cleanUpNode:ic,getDownstreamNodes:cc,initializeNode:uc,setNodeValue:lc,setUnvalidatedAtomValue_DEPRECATED:dc}=je,{graph:fc}=bt,{cloneGraph:hc}=bt,{getNextStoreID:ar}=Yt,{createMutableSource:Wn,reactMode:ir}=at,{applyAtomValueWrites:pc}=$e,{releaseScheduledRetainablesNow:cr}=Qe,{freshSnapshot:vc}=tn,{useCallback:_c,useContext:ur,useEffect:zn,useMemo:mc,useRef:Sc,useState:Rc}=g;function Nt(){throw M("This component must be used inside a <RecoilRoot> component.")}const lr=Object.freeze({storeID:ar(),getState:Nt,replaceState:Nt,getGraph:Nt,subscribeToTransactions:Nt,addTransactionMetadata:Nt});let jn=!1;function dr(t){if(jn)throw M("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){re("recoil_memory_managament_2020")&&re("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&cr(t);const n=e.currentTree.version,o=ac();e.nextTree={...e.currentTree,version:o,stateID:o,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(o,hc(ue(e.graphsByVersion.get(n))))}}const fr=g.createContext({current:lr}),nn=()=>ur(fr),hr=g.createContext(null);function yc(){const t=ur(hr);return t==null&&jt("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),t}function Gn(t,e,n){const o=cc(t,n,n.dirtyAtoms);for(const r of o){const s=e.nodeToComponentSubscriptions.get(r);if(s)for(const[a,[u,l]]of s)l(n)}}function pr(t){const e=t.getState(),n=e.currentTree,o=n.dirtyAtoms;if(o.size){for(const[r,s]of e.nodeTransactionSubscriptions)if(o.has(r))for(const[a,u]of s)u(t);for(const[r,s]of e.transactionSubscriptions)s(t);(!ir().early||e.suspendedComponentResolvers.size>0)&&(Gn(t,e,n),e.suspendedComponentResolvers.forEach(r=>r()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(r=>r(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function gc(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,pr(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Se("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,re("recoil_memory_managament_2020")&&n==null&&cr(t)}finally{e.commitDepth--}}function bc({setNotifyBatcherOfChange:t}){const e=nn(),[,n]=Rc([]);return t(()=>n({})),zn(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),zn(()=>{oa.enqueueExecution("Batcher",()=>{gc(e.current)})}),null}process.env.NODE_ENV!=="production"&&typeof window<"u"&&!window.$recoilDebugStates&&(window.$recoilDebugStates=[]);function Tc(t,e){const n=sr();return e({set:(o,r)=>{const s=n.currentTree,a=lc(t,s,o.key,r),u=new Set(a.keys()),l=s.nonvalidatedAtoms.clone();for(const d of u)l.delete(d);n.currentTree={...s,dirtyAtoms:oc(s.dirtyAtoms,u),atomValues:pc(s.atomValues,a),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:o=>{o.forEach((r,s)=>{n.currentTree=dc(n.currentTree,s,r)})}}),n}function Ec(t){const e=vc(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(o=>o()),n.nodeCleanupFunctions.clear(),n}let vr=0;function wc({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:o}){let r;const s=V=>{const R=r.current.graphsByVersion;if(R.has(V))return ue(R.get(V));const C=fc();return R.set(V,C),C},a=(V,R)=>{if(R==null){const{transactionSubscriptions:C}=v.current.getState(),W=vr++;return C.set(W,V),{release:()=>{C.delete(W)}}}else{const{nodeTransactionSubscriptions:C}=v.current.getState();C.has(R)||C.set(R,new Map);const W=vr++;return ue(C.get(R)).set(W,V),{release:()=>{const G=C.get(R);G&&(G.delete(W),G.size===0&&C.delete(R))}}}},u=V=>{dr(v.current);for(const R of Object.keys(V))ue(v.current.getState().nextTree).transactionMetadata[R]=V[R]},l=V=>{dr(v.current);const R=ue(r.current.nextTree);let C;try{jn=!0,C=V(R)}finally{jn=!1}C!==R&&(process.env.NODE_ENV!=="production"&&typeof window<"u"&&window.$recoilDebugStates.push(C),r.current.nextTree=C,ir().early&&Gn(v.current,r.current,C),ue(d.current)())},d=Sc(null),p=_c(V=>{d.current=V},[d]),v=rr(()=>n??{storeID:ar(),getState:()=>r.current,replaceState:l,getGraph:s,subscribeToTransactions:a,addTransactionMetadata:u});n!=null&&(v.current=n),r=rr(()=>t!=null?Tc(v.current,t):e!=null?Ec(e):sr());const A=mc(()=>Wn==null?void 0:Wn(r,()=>r.current.currentTree.version),[r]);return zn(()=>{const V=v.current;for(const R of new Set(V.getState().knownAtoms))uc(V,R,"get");return()=>{for(const R of V.getState().knownAtoms)ic(V,R)}},[v]),g.createElement(fr.Provider,{value:v},g.createElement(hr.Provider,{value:A},g.createElement(bc,{setNotifyBatcherOfChange:p}),o))}function Nc(t){const{override:e,...n}=t,o=nn();return e===!1&&o.current!==lr?t.children:g.createElement(wc,n)}function Ac(){return nn().current.storeID}var xe={RecoilRoot:Nc,useStoreRef:nn,useRecoilMutableSource:yc,useRecoilStoreID:Ac,notifyComponents_FOR_TESTING:Gn,sendEndOfBatchNotifications_FOR_TESTING:pr};function Cc(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;n++)if(t[n]!==e[n])return!1;return!0}var Lc=Cc;const{useEffect:Vc,useRef:kc}=g;function Ic(t){const e=kc();return Vc(()=>{e.current=t}),e.current}var _r=Ic;const{useStoreRef:Pc}=xe,{SUSPENSE_TIMEOUT_MS:Dc}=Qe,{updateRetainCount:At}=Qe,{RetentionZone:$c}=qt,{useEffect:Oc,useRef:Mc}=g,{isSSR:mr}=wt;function Uc(t){if(re("recoil_memory_managament_2020"))return xc(t)}function xc(t){const n=(Array.isArray(t)?t:[t]).map(a=>a instanceof $c?a:a.key),o=Pc();Oc(()=>{if(!re("recoil_memory_managament_2020"))return;const a=o.current;if(r.current&&!mr)window.clearTimeout(r.current),r.current=null;else for(const u of n)At(a,u,1);return()=>{for(const u of n)At(a,u,-1)}},[o,...n]);const r=Mc(),s=_r(n);if(!mr&&(s===void 0||!Lc(s,n))){const a=o.current;for(const u of n)At(a,u,1);if(s)for(const u of s)At(a,u,-1);r.current&&window.clearTimeout(r.current),r.current=window.setTimeout(()=>{r.current=null;for(const u of n)At(a,u,-1)},Dc)}}var Kn=Uc;function Bc(){return"<component name not available>"}var Ct=Bc;const{batchUpdates:Fc}=Jt,{DEFAULT_VALUE:Sr}=we,{currentRendererSupportsUseSyncExternalStore:Wc,reactMode:et,useMutableSource:zc,useSyncExternalStore:jc}=at,{useRecoilMutableSource:Gc,useStoreRef:Oe}=xe,{isRecoilValue:Kc}=Je,{AbstractRecoilValue:Hn,getRecoilValueAsLoadable:Lt,setRecoilValue:on,setUnvalidatedRecoilValue:Hc,subscribeToRecoilValue:it}=$e,{useCallback:Ne,useEffect:ct,useMemo:Rr,useRef:Vt,useState:Yn}=g,{setByAddingToSet:Yc}=Vo,{isSSR:qc}=wt;function qn(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(r=>{const s=n.current.getState().suspendedComponentResolvers;s.add(r),qc&&oe(t.contents)&&t.contents.finally(()=>{s.delete(r)})}):t.state==="hasError"?t.contents:M(`Invalid value of loadable atom "${e.key}"`)}function be(t,e){if(!Kc(t))throw M(`Invalid argument to ${e}: expected an atom or selector but got ${String(t)}`)}function Zc(){const t=Ct(),e=Oe(),[,n]=Yn([]),o=Vt(new Set);o.current=new Set;const r=Vt(new Set),s=Vt(new Map),a=Ne(l=>{const d=s.current.get(l);d&&(d.release(),s.current.delete(l))},[s]),u=Ne((l,d)=>{s.current.has(d)&&n([])},[]);return ct(()=>{const l=e.current;gt(o.current,r.current).forEach(d=>{if(s.current.has(d)){jt(`Double subscription to RecoilValue "${d}"`);return}const p=it(l,new Hn(d),A=>u(A,d),t);s.current.set(d,p),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{u(l.getState(),d)}):u(l.getState(),d)}),gt(r.current,o.current).forEach(d=>{a(d)}),r.current=o.current}),ct(()=>{const l=s.current;return gt(o.current,new Set(l.keys())).forEach(d=>{const p=it(e.current,new Hn(d),v=>u(v,d),t);l.set(d,p)}),()=>l.forEach((d,p)=>a(p))},[t,e,a,u]),Rr(()=>{function l(R){return process.env.NODE_ENV!=="production"&&be(R,"useSetRecoilState"),C=>{on(e.current,R,C)}}function d(R){return process.env.NODE_ENV!=="production"&&be(R,"useResetRecoilState"),()=>on(e.current,R,Sr)}function p(R){var C;process.env.NODE_ENV!=="production"&&be(R,"useRecoilValueLoadable"),o.current.has(R.key)||(o.current=Yc(o.current,R.key));const W=e.current.getState();return Lt(e.current,R,et().early&&(C=W.nextTree)!==null&&C!==void 0?C:W.currentTree)}function v(R){process.env.NODE_ENV!=="production"&&be(R,"useRecoilValue");const C=p(R);return qn(C,R,e)}function A(R){return process.env.NODE_ENV!=="production"&&be(R,"useRecoilState"),[v(R),l(R)]}function V(R){return process.env.NODE_ENV!=="production"&&be(R,"useRecoilStateLoadable"),[p(R),l(R)]}return{getRecoilValue:v,getRecoilValueLoadable:p,getRecoilState:A,getRecoilStateLoadable:V,getSetRecoilState:l,getResetRecoilState:d}},[o,e])}const kt={current:0};function Jc(t){const e=Oe(),n=Ct(),o=Ne(()=>{var u;process.env.NODE_ENV!=="production"&&kt.current++;const l=e.current,d=l.getState(),p=et().early&&(u=d.nextTree)!==null&&u!==void 0?u:d.currentTree;return{loadable:Lt(l,t,p),key:t.key}},[e,t]),r=Ne(u=>{let l;return()=>{var d,p;const v=u();return(d=l)!==null&&d!==void 0&&d.loadable.is(v.loadable)&&((p=l)===null||p===void 0?void 0:p.key)===v.key?l:(l=v,v)}},[]),s=Rr(()=>r(o),[o,r]),a=Ne(u=>{const l=e.current;return it(l,t,u,n).release},[e,t,n]);return jc(a,s,s).loadable}function Xc(t){const e=Oe(),n=Ne(()=>{var d;const p=e.current,v=p.getState(),A=et().early&&(d=v.nextTree)!==null&&d!==void 0?d:v.currentTree;return Lt(p,t,A)},[e,t]),o=Ne(()=>(process.env.NODE_ENV!=="production"&&kt.current++,n()),[n]),r=Ct(),s=Ne((d,p)=>{const v=e.current;return it(v,t,()=>{if(!re("recoil_suppress_rerender_in_callback"))return p();const V=n();l.current.is(V)||p(),l.current=V},r).release},[e,t,r,n]),a=Gc();if(a==null)throw M("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const u=zc(a,o,s),l=Vt(u);return ct(()=>{l.current=u}),u}function Zn(t){const e=Oe(),n=Ct(),o=Ne(()=>{var l;process.env.NODE_ENV!=="production"&&kt.current++;const d=e.current,p=d.getState(),v=et().early&&(l=p.nextTree)!==null&&l!==void 0?l:p.currentTree;return Lt(d,t,v)},[e,t]),r=Ne(()=>({loadable:o(),key:t.key}),[o,t.key]),s=Ne(l=>{const d=r();return l.loadable.is(d.loadable)&&l.key===d.key?l:d},[r]);ct(()=>{const l=it(e.current,t,d=>{u(s)},n);return u(s),l.release},[n,t,e,s]);const[a,u]=Yn(r);return a.key!==t.key?r().loadable:a.loadable}function Qc(t){const e=Oe(),[,n]=Yn([]),o=Ct(),r=Ne(()=>{var u;process.env.NODE_ENV!=="production"&&kt.current++;const l=e.current,d=l.getState(),p=et().early&&(u=d.nextTree)!==null&&u!==void 0?u:d.currentTree;return Lt(l,t,p)},[e,t]),s=r(),a=Vt(s);return ct(()=>{a.current=s}),ct(()=>{const u=e.current,l=u.getState(),d=it(u,t,v=>{var A;if(!re("recoil_suppress_rerender_in_callback"))return n([]);const V=r();(A=a.current)!==null&&A!==void 0&&A.is(V)||n(V),a.current=V},o);if(l.nextTree)u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var p;if(!re("recoil_suppress_rerender_in_callback"))return n([]);const v=r();(p=a.current)!==null&&p!==void 0&&p.is(v)||n(v),a.current=v}return d.release},[o,r,t,e]),s}function Jn(t){return process.env.NODE_ENV!=="production"&&be(t,"useRecoilValueLoadable"),re("recoil_memory_managament_2020")&&Kn(t),{TRANSITION_SUPPORT:Zn,SYNC_EXTERNAL_STORE:Wc()?Jc:Zn,MUTABLE_SOURCE:Xc,LEGACY:Qc}[et().mode](t)}function yr(t){process.env.NODE_ENV!=="production"&&be(t,"useRecoilValue");const e=Oe(),n=Jn(t);return qn(n,t,e)}function rn(t){process.env.NODE_ENV!=="production"&&be(t,"useSetRecoilState");const e=Oe();return Ne(n=>{on(e.current,t,n)},[e,t])}function eu(t){process.env.NODE_ENV!=="production"&&be(t,"useResetRecoilState");const e=Oe();return Ne(()=>{on(e.current,t,Sr)},[e,t])}function tu(t){return process.env.NODE_ENV!=="production"&&be(t,"useRecoilState"),[yr(t),rn(t)]}function nu(t){return process.env.NODE_ENV!=="production"&&be(t,"useRecoilStateLoadable"),[Jn(t),rn(t)]}function ou(){const t=Oe();return(e,n={})=>{Fc(()=>{t.current.addTransactionMetadata(n),e.forEach((o,r)=>Hc(t.current,new Hn(r),o))})}}function gr(t){return process.env.NODE_ENV!=="production"&&(be(t,"useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE"),et().early||Se("Attepmt to use a hook with UNSTABLE_TRANSITION_SUPPORT in a rendering mode incompatible with concurrent rendering.  Try enabling the recoil_sync_external_store or recoil_transition_support GKs.")),re("recoil_memory_managament_2020")&&Kn(t),Zn(t)}function br(t){process.env.NODE_ENV!=="production"&&be(t,"useRecoilValue_TRANSITION_SUPPORT_UNSTABLE");const e=Oe(),n=gr(t);return qn(n,t,e)}function ru(t){return process.env.NODE_ENV!=="production"&&be(t,"useRecoilState_TRANSITION_SUPPORT_UNSTABLE"),[br(t),rn(t)]}var su={recoilComponentGetRecoilValueCount_FOR_TESTING:kt,useRecoilInterface:Zc,useRecoilState:tu,useRecoilStateLoadable:nu,useRecoilValue:yr,useRecoilValueLoadable:Jn,useResetRecoilState:eu,useSetRecoilState:rn,useSetUnvalidatedAtomValues:ou,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:gr,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:br,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:ru};function au(t,e){const n=new Map;for(const[o,r]of t)e(r,o)&&n.set(o,r);return n}var iu=au;function cu(t,e){const n=new Set;for(const o of t)e(o)&&n.add(o);return n}var uu=cu;function lu(...t){const e=new Map;for(let n=0;n<t.length;n++){const o=t[n].keys();let r;for(;!(r=o.next()).done;)e.set(r.value,t[n].get(r.value))}return e}var du=lu;const{batchUpdates:fu}=Jt,{DEFAULT_VALUE:hu,getNode:Tr,nodes:pu}=we,{useStoreRef:Xn}=xe,{AbstractRecoilValue:vu,setRecoilValueLoadable:_u}=$e,{SUSPENSE_TIMEOUT_MS:mu}=Qe,{cloneSnapshot:sn}=tn,{useCallback:an,useEffect:Er,useRef:wr,useState:Su}=g,{isSSR:Nr}=wt;function cn(t){const e=Xn();Er(()=>e.current.subscribeToTransactions(t).release,[t,e])}function Ar(t){const e=t.atomValues.toMap(),n=Ht(iu(e,(o,r)=>{const a=Tr(r).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&o.state==="hasValue"}),o=>o.contents);return du(t.nonvalidatedAtoms.toMap(),n)}function Ru(t){cn(an(e=>{let n=e.getState().previousTree;const o=e.getState().currentTree;n||(Se("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),n=e.getState().currentTree);const r=Ar(o),s=Ar(n),a=Ht(pu,l=>{var d,p,v,A;return{persistence_UNSTABLE:{type:(d=(p=l.persistence_UNSTABLE)===null||p===void 0?void 0:p.type)!==null&&d!==void 0?d:"none",backButton:(v=(A=l.persistence_UNSTABLE)===null||A===void 0?void 0:A.backButton)!==null&&v!==void 0?v:!1}}}),u=uu(o.dirtyAtoms,l=>r.has(l)||s.has(l));t({atomValues:r,previousAtomValues:s,atomInfo:a,modifiedAtoms:u,transactionMetadata:{...o.transactionMetadata}})},[t]))}function yu(t){cn(an(e=>{const n=sn(e,"latest"),o=sn(e,"previous");t({snapshot:n,previousSnapshot:o})},[t]))}function gu(){const t=Xn(),[e,n]=Su(()=>sn(t.current)),o=_r(e),r=wr(),s=wr();if(cn(an(u=>n(sn(u)),[])),Er(()=>{const u=e.retain();if(r.current&&!Nr){var l;window.clearTimeout(r.current),r.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(u,10)}},[e]),o!==e&&!Nr){if(r.current){var a;window.clearTimeout(r.current),r.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null}s.current=e.retain(),r.current=window.setTimeout(()=>{var u;r.current=null,(u=s.current)===null||u===void 0||u.call(s),s.current=null},mu)}return e}function Cr(t,e){var n;const o=t.getState(),r=(n=o.nextTree)!==null&&n!==void 0?n:o.currentTree,s=e.getStore_INTERNAL().getState().currentTree;fu(()=>{const a=new Set;for(const d of[r.atomValues.keys(),s.atomValues.keys()])for(const p of d){var u,l;((u=r.atomValues.get(p))===null||u===void 0?void 0:u.contents)!==((l=s.atomValues.get(p))===null||l===void 0?void 0:l.contents)&&Tr(p).shouldRestoreFromSnapshots&&a.add(p)}a.forEach(d=>{_u(t,new vu(d),s.atomValues.has(d)?ue(s.atomValues.get(d)):hu)}),t.replaceState(d=>({...d,stateID:e.getID()}))})}function bu(){const t=Xn();return an(e=>Cr(t.current,e),[t])}var Lr={useRecoilSnapshot:gu,gotoSnapshot:Cr,useGotoRecoilSnapshot:bu,useRecoilTransactionObserver:yu,useTransactionObservation_DEPRECATED:Ru,useTransactionSubscription_DEPRECATED:cn};const{peekNodeInfo:Tu}=je,{useStoreRef:Eu}=xe;function wu(){const t=Eu();return({key:e})=>Tu(t.current,t.current.getState().currentTree,e)}var Nu=wu;const{reactMode:Au}=at,{RecoilRoot:Cu,useStoreRef:Lu}=xe,{useMemo:Vu}=g;function ku(){Au().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=Lu().current;return Vu(()=>{function e({children:n}){return g.createElement(Cu,{store_INTERNAL:t},n)}return e},[t])}var Iu=ku;const{loadableWithValue:Pu}=yt,{initializeNode:Du}=je,{DEFAULT_VALUE:$u,getNode:Ou}=we,{copyTreeState:Mu,getRecoilValueAsLoadable:Uu,invalidateDownstreams:xu,writeLoadableToTreeState:Bu}=$e;function Vr(t){return Ou(t.key).nodeType==="atom"}class Fu{constructor(e,n){x(this,"_store",void 0),x(this,"_treeState",void 0),x(this,"_changes",void 0),x(this,"get",o=>{if(this._changes.has(o.key))return this._changes.get(o.key);if(!Vr(o))throw M("Reading selectors within atomicUpdate is not supported");const r=Uu(this._store,o,this._treeState);if(r.state==="hasValue")return r.contents;throw r.state==="hasError"?r.contents:M(`Expected Recoil atom ${o.key} to have a value, but it is in a loading state.`)}),x(this,"set",(o,r)=>{if(!Vr(o))throw M("Setting selectors within atomicUpdate is not supported");if(typeof r=="function"){const s=this.get(o);this._changes.set(o.key,r(s))}else Du(this._store,o.key,"set"),this._changes.set(o.key,r)}),x(this,"reset",o=>{this.set(o,$u)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=Mu(this._treeState);for(const[n,o]of this._changes)Bu(e,n,Pu(o));return xu(this._store,e),e}}function Wu(t){return e=>{t.replaceState(n=>{const o=new Fu(t,n);return e(o),o.newTreeState_INTERNAL()})}}var zu={atomicUpdater:Wu},ju=zu.atomicUpdater,kr=Object.freeze({__proto__:null,atomicUpdater:ju});function Gu(t,e){if(!t)throw new Error(e)}var Ku=Gu,Me=Ku;const{atomicUpdater:Hu}=kr,{batchUpdates:Yu}=Jt,{DEFAULT_VALUE:qu}=we,{useStoreRef:Zu}=xe,{refreshRecoilValue:Ju,setRecoilValue:Ir}=$e,{cloneSnapshot:Xu}=tn,{gotoSnapshot:Qu}=Lr,{useCallback:el}=g;class Pr{}const tl=new Pr;function Dr(t,e,n,o){let r=tl,s;if(Yu(()=>{const u="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw M(u);const l=ko({...o??{},set:(p,v)=>Ir(t,p,v),reset:p=>Ir(t,p,qu),refresh:p=>Ju(t,p),gotoSnapshot:p=>Qu(t,p),transact_UNSTABLE:p=>Hu(t)(p)},{snapshot:()=>{const p=Xu(t);return s=p.retain(),p}}),d=e(l);if(typeof d!="function")throw M(u);r=d(...n)}),r instanceof Pr&&(process.env.NODE_ENV!=="production"?Me(!1,"batchUpdates should return immediately"):Me(!1)),oe(r))r=r.finally(()=>{var u;(u=s)===null||u===void 0||u()});else{var a;(a=s)===null||a===void 0||a()}return r}function nl(t,e){const n=Zu();return el((...o)=>Dr(n.current,t,o),e!=null?[...e,n]:void 0)}var $r={recoilCallback:Dr,useRecoilCallback:nl};const{useStoreRef:ol}=xe,{refreshRecoilValue:rl}=$e,{useCallback:sl}=g;function al(t){const e=ol();return sl(()=>{const n=e.current;rl(n,t)},[t,e])}var il=al;const{atomicUpdater:cl}=kr,{useStoreRef:ul}=xe,{useMemo:ll}=g;function dl(t,e){const n=ul();return ll(()=>(...o)=>{cl(n.current)(s=>{t(s)(...o)})},e!=null?[...e,n]:void 0)}var fl=dl;class hl{constructor(e){x(this,"value",void 0),this.value=e}}var pl={WrappedValue:hl},vl=pl.WrappedValue,Or=Object.freeze({__proto__:null,WrappedValue:vl});const{isFastRefreshEnabled:_l}=at;class Mr extends Error{}class ml{constructor(e){var n,o,r;x(this,"_name",void 0),x(this,"_numLeafs",void 0),x(this,"_root",void 0),x(this,"_onHit",void 0),x(this,"_onSet",void 0),x(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(o=e==null?void 0:e.onSet)!==null&&o!==void 0?o:()=>{},this._mapNodeValue=(r=e==null?void 0:e.mapNodeValue)!==null&&r!==void 0?r:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var o;return(o=this.getLeafNode(e,n))===null||o===void 0?void 0:o.value}getLeafNode(e,n){if(this._root==null)return;let o=this._root;for(;o;){if(n==null||n.onNodeVisit(o),o.type==="leaf")return this._onHit(o),o;const r=this._mapNodeValue(e(o.nodeKey));o=o.branches.get(r)}}set(e,n,o){const r=()=>{var s,a,u,l;let d,p;for(const[W,G]of e){var v,A,V;const S=this._root;if((S==null?void 0:S.type)==="leaf")throw this.invalidCacheError();const k=d;if(d=k?k.branches.get(p):S,d=(v=d)!==null&&v!==void 0?v:{type:"branch",nodeKey:W,parent:k,branches:new Map,branchKey:p},d.type!=="branch"||d.nodeKey!==W)throw this.invalidCacheError();k==null||k.branches.set(p,d),o==null||(A=o.onNodeVisit)===null||A===void 0||A.call(o,d),p=this._mapNodeValue(G),this._root=(V=this._root)!==null&&V!==void 0?V:d}const R=d?(s=d)===null||s===void 0?void 0:s.branches.get(p):this._root;if(R!=null&&(R.type!=="leaf"||R.branchKey!==p))throw this.invalidCacheError();const C={type:"leaf",value:n,parent:d,branchKey:p};(a=d)===null||a===void 0||a.branches.set(p,C),this._root=(u=this._root)!==null&&u!==void 0?u:C,this._numLeafs++,this._onSet(C),o==null||(l=o.onNodeVisit)===null||l===void 0||l.call(o,C)};try{r()}catch(s){if(s instanceof Mr)this.clear(),r();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let o=e.parent,r=e.branchKey;for(;o;){var s;if(o.branches.delete(r),o===n)return o.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(o.branches.size>0)break;r=(s=o)===null||s===void 0?void 0:s.branchKey,o=o.parent}for(;o!==n;o=o.parent)if(o==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=_l()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Se(e+(this._name!=null?` - ${this._name}`:"")),new Mr}}var Sl={TreeCache:ml},Rl=Sl.TreeCache,Ur=Object.freeze({__proto__:null,TreeCache:Rl});class yl{constructor(e){var n;x(this,"_maxSize",void 0),x(this,"_size",void 0),x(this,"_head",void 0),x(this,"_tail",void 0),x(this,"_map",void 0),x(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:o=>o}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),o=this._map.get(n);if(o)return this.set(e,o.value),o.value}set(e,n){const o=this._keyMapper(e);this._map.get(o)&&this.delete(e);const s=this.head(),a={key:e,right:s,left:null,value:n};s?s.left=a:this._tail=a,this._map.set(o,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const o=ue(this._map.get(n)),r=o.right,s=o.left;r&&(r.left=o.left),s&&(s.right=o.right),o===this.head()&&(this._head=r),o===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var gl={LRUCache:yl},bl=gl.LRUCache,xr=Object.freeze({__proto__:null,LRUCache:bl});const{LRUCache:Tl}=xr,{TreeCache:El}=Ur;function wl({name:t,maxSize:e,mapNodeValue:n=o=>o}){const o=new Tl({maxSize:e}),r=new El({name:t,mapNodeValue:n,onHit:s=>{o.set(s,!0)},onSet:s=>{const a=o.tail();o.set(s,!0),a&&r.size()>e&&r.delete(a.key)}});return r}var Br=wl;const Nl=15;function Ve(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw M("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var o;return(o=JSON.stringify(t))!==null&&o!==void 0?o:""}if(oe(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((r,s)=>Ve(r,e,s.toString()))}]`;if(typeof t.toJSON=="function")return Ve(t.toJSON(n),e,n);if(t instanceof Map){const r={};for(const[s,a]of t)r[typeof s=="string"?s:Ve(s,e)]=a;return Ve(r,e,n)}return t instanceof Set?Ve(Array.from(t).sort((r,s)=>Ve(r,e).localeCompare(Ve(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Ve(Array.from(t),e,n):`{${Object.keys(t).filter(r=>t[r]!==void 0).sort().map(r=>`${Ve(r,e)}:${Ve(t[r],e,r)}`).join(",")}}`}function Al(t,e={allowFunctions:!1}){if(process.env.NODE_ENV!=="production"&&typeof window<"u"){const n=window.performance?window.performance.now():0,o=Ve(t,e),r=window.performance?window.performance.now():0;return r-n>Nl&&(console.groupCollapsed(`Recoil: Spent ${r-n}ms computing a cache key`),console.warn(t,o),console.groupEnd()),o}return Ve(t,e)}var un=Al;const{TreeCache:Cl}=Ur,ln={equality:"reference",eviction:"keep-all",maxSize:1/0};function Ll({equality:t=ln.equality,eviction:e=ln.eviction,maxSize:n=ln.maxSize}=ln,o){const r=Vl(t);return kl(e,n,r,o)}function Vl(t){switch(t){case"reference":return e=>e;case"value":return e=>un(e)}throw M(`Unrecognized equality policy ${t}`)}function kl(t,e,n,o){switch(t){case"keep-all":return new Cl({name:o,mapNodeValue:n});case"lru":return Br({name:o,maxSize:ue(e),mapNodeValue:n});case"most-recent":return Br({name:o,maxSize:1,mapNodeValue:n})}throw M(`Unrecognized eviction policy ${t}`)}var Il=Ll;function Pl(t){var e,n;if(typeof window>"u")return!1;const r=(n=(t!=null?(e=t.ownerDocument)!==null&&e!==void 0?e:t:document).defaultView)!==null&&n!==void 0?n:window;return t!=null&&(typeof r.Node=="function"?t instanceof r.Node:typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string")}var Dl=Pl;const{isReactNative:$l,isWindow:Ol}=wt;function Ml(t){if(t===null||typeof t!="object")return!0;switch(typeof t.$$typeof){case"symbol":return!0;case"number":return!0}return!!(t["@@__IMMUTABLE_ITERABLE__@@"]!=null||t["@@__IMMUTABLE_KEYED__@@"]!=null||t["@@__IMMUTABLE_INDEXED__@@"]!=null||t["@@__IMMUTABLE_ORDERED__@@"]!=null||t["@@__IMMUTABLE_RECORD__@@"]!=null||Dl(t)||oe(t)||t instanceof Error||ArrayBuffer.isView(t)||!$l&&Ol(t))}function Fr(t){if(!(typeof t!="object"||Ml(t))){Object.freeze(t);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];typeof n=="object"&&n!=null&&!Object.isFrozen(n)&&Fr(n)}Object.seal(t)}}var Qn=Fr;function Ul(t){return()=>null}var xl={startPerfBlock:Ul};const{isLoadable:Bl,loadableWithError:dn,loadableWithPromise:Fl,loadableWithValue:eo}=yt,{WrappedValue:Wr}=Or,{getNodeLoadable:fn,peekNodeLoadable:Wl,setNodeValue:zl}=je,{saveDepsToStore:jl}=bt,{DEFAULT_VALUE:Gl,getConfigDeletionHandler:Kl,getNode:Hl,registerNode:zr}=we,{isRecoilValue:Yl}=Je,{markRecoilValueModified:jr}=$e,{retainedByOptionWithDefault:ql}=Qe,{recoilCallback:Zl}=$r,{startPerfBlock:Jl}=xl;class Gr{}const It=new Gr,Pt=[],hn=new Map,Xl=(()=>{let t=0;return()=>t++})();function Kr(t){let e=null;const{key:n,get:o,cachePolicy_UNSTABLE:r}=t,s=t.set!=null?t.set:void 0;if(process.env.NODE_ENV!=="production"){if(typeof n!="string")throw M("A key option with a unique string value must be provided when creating a selector.");if(typeof o!="function")throw M("Selectors must specify a get callback option to get the selector value.")}const a=new Set,u=Il(r??{equality:"reference",eviction:"keep-all"},n),l=ql(t.retainedBy_UNSTABLE),d=new Map;let p=0;function v(){return!re("recoil_memory_managament_2020")||p>0}function A(h){return h.getState().knownSelectors.add(n),p++,()=>{p--}}function V(){return Kl(n)!==void 0&&!v()}function R(h,y,T,U,L){Be(y,U,L),C(h,T)}function C(h,y){de(h,y)&&se(h),G(y,!0)}function W(h,y){de(h,y)&&(ue(H(h)).stateVersions.clear(),G(y,!1))}function G(h,y){const T=hn.get(h);if(T!=null){for(const U of T)jr(U,ue(e));y&&hn.delete(h)}}function S(h,y){let T=hn.get(y);T==null&&hn.set(y,T=new Set),T.add(h)}function k(h,y,T,U,L,j){return y.then(F=>{if(!v())throw se(h),It;const I=eo(F);return R(h,T,L,I,U),F}).catch(F=>{if(!v())throw se(h),It;if(oe(F))return B(h,F,T,U,L,j);const I=dn(F);throw R(h,T,L,I,U),F})}function B(h,y,T,U,L,j){return y.then(F=>{if(!v())throw se(h),It;j.loadingDepKey!=null&&j.loadingDepPromise===y?T.atomValues.set(j.loadingDepKey,eo(F)):h.getState().knownSelectors.forEach(ee=>{T.atomValues.delete(ee)});const I=Q(h,T);if(I&&I.state!=="loading"){if((de(h,L)||H(h)==null)&&C(h,L),I.state==="hasValue")return I.contents;throw I.contents}if(!de(h,L)){const ee=ye(h,T);if(ee!=null)return ee.loadingLoadable.contents}const[ne,fe]=Z(h,T,L);if(ne.state!=="loading"&&R(h,T,L,ne,fe),ne.state==="hasError")throw ne.contents;return ne.contents}).catch(F=>{if(F instanceof Gr)throw It;if(!v())throw se(h),It;const I=dn(F);throw R(h,T,L,I,U),F})}function K(h,y,T,U){var L,j,F,I;if(de(h,U)||y.version===((L=h.getState())===null||L===void 0||(j=L.currentTree)===null||j===void 0?void 0:j.version)||y.version===((F=h.getState())===null||F===void 0||(I=F.nextTree)===null||I===void 0?void 0:I.version)){var ne,fe,ee;jl(n,T,h,(ne=(fe=h.getState())===null||fe===void 0||(ee=fe.nextTree)===null||ee===void 0?void 0:ee.version)!==null&&ne!==void 0?ne:h.getState().currentTree.version)}for(const ce of T)a.add(ce)}function Z(h,y,T){const U=Jl(n);let L=!0,j=!0;const F=()=>{U(),j=!1};let I,ne=!1,fe;const ee={loadingDepKey:null,loadingDepPromise:null},ce=new Map;function Ae({key:me}){const ge=fn(h,y,me);switch(ce.set(me,ge),L||(K(h,y,new Set(ce.keys()),T),W(h,T)),ge.state){case"hasValue":return ge.contents;case"hasError":throw ge.contents;case"loading":throw ee.loadingDepKey=me,ee.loadingDepPromise=ge.contents,ge.contents}throw M("Invalid Loadable state")}const Pe=me=>(...ge)=>{if(j)throw M("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&(process.env.NODE_ENV!=="production"?Me(!1,"Recoil Value can never be null"):Me(!1)),Zl(h,me,ge,{node:e})};try{I=o({get:Ae,getCallback:Pe}),I=Yl(I)?Ae(I):I,Bl(I)&&(I.state==="hasError"&&(ne=!0),I=I.contents),oe(I)?I=k(h,I,y,ce,T,ee).finally(F):F(),I=I instanceof Wr?I.value:I}catch(me){I=me,oe(I)?I=B(h,I,y,ce,T,ee).finally(F):(ne=!0,F())}return ne?fe=dn(I):oe(I)?fe=Fl(I):fe=eo(I),L=!1,Ue(h,T,ce),K(h,y,new Set(ce.keys()),T),[fe,ce]}function Q(h,y){let T=y.atomValues.get(n);if(T!=null)return T;const U=new Set;try{T=u.get(j=>(typeof j!="string"&&(process.env.NODE_ENV!=="production"?Me(!1,"Cache nodeKey is type string"):Me(!1)),fn(h,y,j).contents),{onNodeVisit:j=>{j.type==="branch"&&j.nodeKey!==n&&U.add(j.nodeKey)}})}catch(j){throw M(`Problem with cache lookup for selector "${n}": ${j.message}`)}if(T){var L;y.atomValues.set(n,T),K(h,y,U,(L=H(h))===null||L===void 0?void 0:L.executionID)}return T}function le(h,y){const T=Q(h,y);if(T!=null)return se(h),T;const U=ye(h,y);if(U!=null){var L;return((L=U.loadingLoadable)===null||L===void 0?void 0:L.state)==="loading"&&S(h,U.executionID),U.loadingLoadable}const j=Xl(),[F,I]=Z(h,y,j);return F.state==="loading"?(_e(h,j,F,I,y),S(h,j)):(se(h),Be(y,F,I)),F}function ye(h,y){const T=Zo([d.has(h)?[ue(d.get(h))]:[],Gt($n(d,([L])=>L!==h),([,L])=>L)]);function U(L){for(const[j,F]of L)if(!fn(h,y,j).is(F))return!0;return!1}for(const L of T){if(L.stateVersions.get(y.version)||!U(L.depValuesDiscoveredSoFarDuringAsyncWork))return L.stateVersions.set(y.version,!0),L;L.stateVersions.set(y.version,!1)}}function H(h){return d.get(h)}function _e(h,y,T,U,L){d.set(h,{depValuesDiscoveredSoFarDuringAsyncWork:U,executionID:y,loadingLoadable:T,stateVersions:new Map([[L.version,!0]])})}function Ue(h,y,T){if(de(h,y)){const U=H(h);U!=null&&(U.depValuesDiscoveredSoFarDuringAsyncWork=T)}}function se(h){d.delete(h)}function de(h,y){var T;return y===((T=H(h))===null||T===void 0?void 0:T.executionID)}function ke(h){return Array.from(h.entries()).map(([y,T])=>[y,T.contents])}function Be(h,y,T){process.env.NODE_ENV!=="production"&&y.state!=="loading"&&!t.dangerouslyAllowMutability&&Qn(y.contents),h.atomValues.set(n,y);try{u.set(ke(T),y)}catch(U){throw M(`Problem with setting cache for selector "${n}": ${U.message}`)}}function Ie(h){if(Pt.includes(n)){const y=`Recoil selector has circular dependencies: ${Pt.slice(Pt.indexOf(n)).join(" → ")}`;return dn(M(y))}Pt.push(n);try{return h()}finally{Pt.pop()}}function Fe(h,y){const T=y.atomValues.get(n);return T??u.get(U=>{var L;return typeof U!="string"&&(process.env.NODE_ENV!=="production"?Me(!1,"Cache nodeKey is type string"):Me(!1)),(L=Wl(h,y,U))===null||L===void 0?void 0:L.contents})}function We(h,y){return Ie(()=>le(h,y))}function q(h){h.atomValues.delete(n)}function X(h,y){e==null&&(process.env.NODE_ENV!=="production"?Me(!1,"Recoil Value can never be null"):Me(!1));for(const U of a){var T;const L=Hl(U);(T=L.clearCache)===null||T===void 0||T.call(L,h,y)}a.clear(),q(y),u.clear(),jr(h,e)}return s!=null?e=zr({key:n,nodeType:"selector",peek:Fe,get:We,set:(y,T,U)=>{let L=!1;const j=new Map;function F({key:ee}){if(L)throw M("Recoil: Async selector sets are not currently supported.");const ce=fn(y,T,ee);if(ce.state==="hasValue")return ce.contents;if(ce.state==="loading"){const Ae=`Getting value of asynchronous atom or selector "${ee}" in a pending state while setting selector "${n}" is not yet supported.`;throw Se(Ae),M(Ae)}else throw ce.contents}function I(ee,ce){if(L){const me="Recoil: Async selector sets are not currently supported.";throw Se(me),M(me)}const Ae=typeof ce=="function"?ce(F(ee)):ce;zl(y,T,ee.key,Ae).forEach((me,ge)=>j.set(ge,me))}function ne(ee){I(ee,Gl)}const fe=s({set:I,get:F,reset:ne},U);if(fe!==void 0)throw oe(fe)?M("Recoil: Async selector sets are not currently supported."):M("Recoil: selector set should be a void function.");return L=!0,j},init:A,invalidate:q,clearCache:X,shouldDeleteConfigOnRelease:V,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=zr({key:n,nodeType:"selector",peek:Fe,get:We,init:A,invalidate:q,clearCache:X,shouldDeleteConfigOnRelease:V,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}Kr.value=t=>new Wr(t);var ut=Kr;const{isLoadable:Ql,loadableWithError:to,loadableWithPromise:no,loadableWithValue:lt}=yt,{WrappedValue:Hr}=Or,{peekNodeInfo:ed}=je,{DEFAULT_VALUE:tt,DefaultValue:Ge,getConfigDeletionHandler:Yr,registerNode:td,setConfigDeletionHandler:nd}=we,{isRecoilValue:od}=Je,{getRecoilValueAsLoadable:rd,markRecoilValueModified:sd,setRecoilValue:qr,setRecoilValueLoadable:ad}=$e,{retainedByOptionWithDefault:id}=Qe,Dt=t=>t instanceof Hr?t.value:t;function cd(t){const{key:e,persistence_UNSTABLE:n}=t,o=id(t.retainedBy_UNSTABLE);let r=0;function s(S){return no(S.then(k=>(a=lt(k),k)).catch(k=>{throw a=to(k),k}))}let a=oe(t.default)?s(t.default):Ql(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:lt(Dt(t.default));d(a.contents);let u;const l=new Map;function d(S){return process.env.NODE_ENV!=="production"&&t.dangerouslyAllowMutability!==!0?oe(S)?S.then(k=>(Qn(k),k)):(Qn(S),S):S}function p(S,k){const B=k.then(K=>{var Z,Q;return((Q=((Z=S.getState().nextTree)!==null&&Z!==void 0?Z:S.getState().currentTree).atomValues.get(e))===null||Q===void 0?void 0:Q.contents)===B&&qr(S,G,K),K}).catch(K=>{var Z,Q;throw((Q=((Z=S.getState().nextTree)!==null&&Z!==void 0?Z:S.getState().currentTree).atomValues.get(e))===null||Q===void 0?void 0:Q.contents)===B&&ad(S,G,to(K)),K});return B}function v(S,k,B){var K;r++;const Z=()=>{var H;r--,(H=l.get(S))===null||H===void 0||H.forEach(_e=>_e()),l.delete(S)};if(S.getState().knownAtoms.add(e),a.state==="loading"){const H=()=>{var _e;((_e=S.getState().nextTree)!==null&&_e!==void 0?_e:S.getState().currentTree).atomValues.has(e)||sd(S,G)};a.contents.finally(H)}const Q=(K=t.effects)!==null&&K!==void 0?K:t.effects_UNSTABLE;if(Q!=null){let de=function(q){if(_e&&q.key===e){const X=H;return X instanceof Ge?A(S,k):oe(X)?no(X.then(h=>h instanceof Ge?a.toPromise():h)):lt(X)}return rd(S,q)},ke=function(q){return de(q).toPromise()},Be=function(q){var X;const h=ed(S,(X=S.getState().nextTree)!==null&&X!==void 0?X:S.getState().currentTree,q.key);return _e&&q.key===e&&!(H instanceof Ge)?{...h,isSet:!0,loadable:de(q)}:h},H=tt,_e=!0,Ue=!1,se=null;const Ie=q=>X=>{if(_e){const h=de(G),y=h.state==="hasValue"?h.contents:tt;H=typeof X=="function"?X(y):X,oe(H)&&(H=H.then(T=>(se={effect:q,value:T},T)))}else{if(oe(X))throw M("Setting atoms to async values is not implemented.");typeof X!="function"&&(se={effect:q,value:Dt(X)}),qr(S,G,typeof X=="function"?h=>{const y=Dt(X(h));return se={effect:q,value:y},y}:Dt(X))}},Fe=q=>()=>Ie(q)(tt),We=q=>X=>{var h;const{release:y}=S.subscribeToTransactions(T=>{var U;let{currentTree:L,previousTree:j}=T.getState();j||(Se("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),j=L);const F=(U=L.atomValues.get(e))!==null&&U!==void 0?U:a;if(F.state==="hasValue"){var I,ne,fe,ee;const ce=F.contents,Ae=(I=j.atomValues.get(e))!==null&&I!==void 0?I:a,Pe=Ae.state==="hasValue"?Ae.contents:tt;((ne=se)===null||ne===void 0?void 0:ne.effect)!==q||((fe=se)===null||fe===void 0?void 0:fe.value)!==ce?X(ce,Pe,!L.atomValues.has(e)):((ee=se)===null||ee===void 0?void 0:ee.effect)===q&&(se=null)}},e);l.set(S,[...(h=l.get(S))!==null&&h!==void 0?h:[],y])};for(const q of Q)try{const X=q({node:G,storeID:S.storeID,parentStoreID_UNSTABLE:S.parentStoreID,trigger:B,setSelf:Ie(q),resetSelf:Fe(q),onSet:We(q),getPromise:ke,getLoadable:de,getInfo_UNSTABLE:Be});if(X!=null){var le;l.set(S,[...(le=l.get(S))!==null&&le!==void 0?le:[],X])}}catch(X){H=X,Ue=!0}if(_e=!1,!(H instanceof Ge)){var ye;const q=Ue?to(H):oe(H)?no(p(S,H)):lt(Dt(H));d(q.contents),k.atomValues.set(e,q),(ye=S.getState().nextTree)===null||ye===void 0||ye.atomValues.set(e,q)}}return Z}function A(S,k){var B,K;return(B=(K=k.atomValues.get(e))!==null&&K!==void 0?K:u)!==null&&B!==void 0?B:a}function V(S,k){if(k.atomValues.has(e))return ue(k.atomValues.get(e));if(k.nonvalidatedAtoms.has(e)){if(u!=null)return u;if(n==null)return jt(`Tried to restore a persisted value for atom ${e} but it has no persistence settings.`),a;const B=k.nonvalidatedAtoms.get(e),K=n.validator(B,tt);return u=K instanceof Ge?a:lt(K),u}else return a}function R(){u=void 0}function C(S,k,B){if(k.atomValues.has(e)){const K=ue(k.atomValues.get(e));if(K.state==="hasValue"&&B===K.contents)return new Map}else if(!k.nonvalidatedAtoms.has(e)&&B instanceof Ge)return new Map;return d(B),u=void 0,new Map().set(e,lt(B))}function W(){return Yr(e)!==void 0&&r<=0}const G=td({key:e,nodeType:"atom",peek:A,get:V,set:C,init:v,invalidate:R,shouldDeleteConfigOnRelease:W,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:o});return G}function oo(t){if(process.env.NODE_ENV!=="production"&&typeof t.key!="string")throw M("A key option with a unique string value must be provided when creating an atom.");const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return od(n)?ud({...e,default:n}):cd({...e,default:n})}function ud(t){const e=oo({...t,default:tt,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:o=>o instanceof Ge?o:ue(t.persistence_UNSTABLE).validator(o,tt)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=ut({key:`${t.key}__withFallback`,get:({get:o})=>{const r=o(e);return r instanceof Ge?t.default:r},set:({set:o},r)=>o(e,r),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return nd(n.key,Yr(t.key)),n}oo.value=t=>new Hr(t);var Zr=oo;class ld{constructor(e){var n;x(this,"_map",void 0),x(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:o=>o}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var dd={MapCache:ld},fd=dd.MapCache,hd=Object.freeze({__proto__:null,MapCache:fd});const{LRUCache:Jr}=xr,{MapCache:pd}=hd,pn={equality:"reference",eviction:"none",maxSize:1/0};function vd({equality:t=pn.equality,eviction:e=pn.eviction,maxSize:n=pn.maxSize}=pn){const o=_d(t);return md(e,n,o)}function _d(t){switch(t){case"reference":return e=>e;case"value":return e=>un(e)}throw M(`Unrecognized equality policy ${t}`)}function md(t,e,n){switch(t){case"keep-all":return new pd({mapKey:n});case"lru":return new Jr({mapKey:n,maxSize:ue(e)});case"most-recent":return new Jr({mapKey:n,maxSize:1})}throw M(`Unrecognized eviction policy ${t}`)}var Xr=vd;const{setConfigDeletionHandler:Sd}=we;function Rd(t){var e,n;const o=Xr({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return r=>{var s,a;const u=o.get(r);if(u!=null)return u;const{cachePolicyForParams_UNSTABLE:l,...d}=t,p="default"in t?t.default:new Promise(()=>{}),v=Zr({...d,key:`${t.key}__${(s=un(r))!==null&&s!==void 0?s:"void"}`,default:typeof p=="function"?p(r):p,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(r):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(r):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(r):(a=t.effects)!==null&&a!==void 0?a:t.effects_UNSTABLE});return o.set(r,v),Sd(v.key,()=>{o.delete(r)}),v}}var yd=Rd;const{setConfigDeletionHandler:gd}=we;let bd=0;function Td(t){var e,n;const o=Xr({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return r=>{var s;let a;try{a=o.get(r)}catch(A){throw M(`Problem with cache lookup for selector ${t.key}: ${A.message}`)}if(a!=null)return a;const u=`${t.key}__selectorFamily/${(s=un(r,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${bd++}`,l=A=>t.get(r)(A),d=t.cachePolicy_UNSTABLE,p=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(r):t.retainedBy_UNSTABLE;let v;if(t.set!=null){const A=t.set;v=ut({key:u,get:l,set:(R,C)=>A(r)(R,C),cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:p})}else v=ut({key:u,get:l,cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:p});return o.set(r,v),gd(v.key,()=>{o.delete(r)}),v}}var Ke=Td;const Ed=Ke({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function wd(t){return Ed(t)}var Nd=wd;const Ad=Ke({key:"__error",get:t=>()=>{throw M(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Cd(t){return Ad(t)}var Ld=Cd;function Vd(t){return t}var kd=Vd;const{loadableWithError:Qr,loadableWithPromise:es,loadableWithValue:ts}=yt;function vn(t,e){const n=Array(e.length).fill(void 0),o=Array(e.length).fill(void 0);for(const[r,s]of e.entries())try{n[r]=t(s)}catch(a){o[r]=a}return[n,o]}function Id(t){return t!=null&&!oe(t)}function _n(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function ro(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,o,r)=>({...n,[o]:e[r]}),{})}function dt(t,e,n){const o=n.map((r,s)=>r==null?ts(e[s]):oe(r)?es(r):Qr(r));return ro(t,o)}function Pd(t,e){return e.map((n,o)=>n===void 0?t[o]:n)}const Dd=Ke({key:"__waitForNone",get:t=>({get:e})=>{const n=_n(t),[o,r]=vn(e,n);return dt(t,o,r)},dangerouslyAllowMutability:!0}),$d=Ke({key:"__waitForAny",get:t=>({get:e})=>{const n=_n(t),[o,r]=vn(e,n);return r.some(s=>!oe(s))?dt(t,o,r):new Promise(s=>{for(const[a,u]of r.entries())oe(u)&&u.then(l=>{o[a]=l,r[a]=void 0,s(dt(t,o,r))}).catch(l=>{r[a]=l,s(dt(t,o,r))})})},dangerouslyAllowMutability:!0}),Od=Ke({key:"__waitForAll",get:t=>({get:e})=>{const n=_n(t),[o,r]=vn(e,n);if(r.every(a=>a==null))return ro(t,o);const s=r.find(Id);if(s!=null)throw s;return Promise.all(r).then(a=>ro(t,Pd(o,a)))},dangerouslyAllowMutability:!0}),Md=Ke({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=_n(t),[o,r]=vn(e,n);return r.every(s=>!oe(s))?dt(t,o,r):Promise.all(r.map((s,a)=>oe(s)?s.then(u=>{o[a]=u,r[a]=void 0}).catch(u=>{o[a]=void 0,r[a]=u}):null)).then(()=>dt(t,o,r))},dangerouslyAllowMutability:!0}),Ud=Ke({key:"__noWait",get:t=>({get:e})=>{try{return ut.value(ts(e(t)))}catch(n){return ut.value(oe(n)?es(n):Qr(n))}},dangerouslyAllowMutability:!0});var xd={waitForNone:Dd,waitForAny:$d,waitForAll:Od,waitForAllSettled:Md,noWait:Ud};const{RecoilLoadable:Bd}=yt,{DefaultValue:Fd}=we,{RecoilRoot:Wd,useRecoilStoreID:zd}=xe,{isRecoilValue:jd}=Je,{retentionZone:Gd}=qt,{freshSnapshot:Kd}=tn,{useRecoilState:Hd,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Yd,useRecoilStateLoadable:qd,useRecoilValue:Zd,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Jd,useRecoilValueLoadable:Xd,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Qd,useResetRecoilState:ef,useSetRecoilState:tf}=su,{useGotoRecoilSnapshot:nf,useRecoilSnapshot:of,useRecoilTransactionObserver:rf}=Lr,{useRecoilCallback:sf}=$r,{noWait:af,waitForAll:cf,waitForAllSettled:uf,waitForAny:lf,waitForNone:df}=xd;var mn={DefaultValue:Fd,isRecoilValue:jd,RecoilLoadable:Bd,RecoilEnv:st,RecoilRoot:Wd,useRecoilStoreID:zd,useRecoilBridgeAcrossReactRoots_UNSTABLE:Iu,atom:Zr,selector:ut,atomFamily:yd,selectorFamily:Ke,constSelector:Nd,errorSelector:Ld,readOnlySelector:kd,noWait:af,waitForNone:df,waitForAny:lf,waitForAll:cf,waitForAllSettled:uf,useRecoilValue:Zd,useRecoilValueLoadable:Xd,useRecoilState:Hd,useRecoilStateLoadable:qd,useSetRecoilState:tf,useResetRecoilState:ef,useGetRecoilValueInfo_UNSTABLE:Nu,useRecoilRefresher_UNSTABLE:il,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Qd,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Jd,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Yd,useRecoilCallback:sf,useRecoilTransaction_UNSTABLE:fl,useGotoRecoilSnapshot:nf,useRecoilSnapshot:of,useRecoilTransactionObserver_UNSTABLE:rf,snapshot_UNSTABLE:Kd,useRetain:Kn,retentionZone:Gd},ff=mn.RecoilRoot,hf=mn.atom,pf=mn.useRecoilValue,vf=mn.useRecoilCallback;const so=g.createContext({testData:{},callObject:null,addTestData:()=>{}}),ns=hf({key:"test-data-state",default:{}}),_f=({children:t,callObject:e})=>{const n=pf(ns),o=vf(({set:r})=>(s,a)=>{r(ns,u=>({...u,[s]:a}))},[]);return En.jsx(so.Provider,{value:{testData:n,addTestData:o,callObject:e},children:t})};so.displayName="DailyTestContext";const $t=()=>g.useContext(so),ao={RELAY_ONLY:"relay"};Object.values(ao);const os={TWILIO:"https://prod-ks.pluot.blue/tt-150331.json"},rs={CONNECTED:"connected",FAILED:"failed",STOPPED:"stopped"};class mf{constructor({natService:e,connectionMode:n,iceServers:o,mediaStream:r}){this.connectionMode=n,this.mediaStream=r,this.natService=e,this.iceServers=o,this.localPeer=null,this.remotePeer=null,this.constraints={video:{deviceId:"default",facingMode:"user",width:1280,height:720},audio:{deviceId:"default"}},this.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0}}async setupRTCPeerConnection(){if(!window.RTCPeerConnection)return;const e="relay",n={iceServers:this.iceServers,iceTransportPolicy:e};return this.localPeer=new RTCPeerConnection(n),this.remotePeer=new RTCPeerConnection(n),this.localPeer.bufferedIceCandidates=[],this.remotePeer.bufferedIceCandidates=[],this.localPeer.iceCandidates=[],this.setupPeerListeners(),await this.start(),new Promise((o,r)=>{this.resolve=o,this.reject=r,this.connectionTimeout=window.setTimeout(()=>{const s=this.getConnectionInfo();this.resolve(s)},15e3),this.flushTimeout=window.setTimeout(()=>{this.flushIceCandidates(this.localPeer),this.flushIceCandidates(this.remotePeer)},7500)})}setupPeerListeners(){this.localPeer&&(this.localPeer.onicecandidate=e=>{var n,o,r,s;if(!e.candidate||!e.candidate.candidate){this.flushIceCandidates(this.remotePeer);return}(o=(n=this.localPeer)==null?void 0:n.iceCandidates)==null||o.push(e.candidate),(s=(r=this.remotePeer)==null?void 0:r.bufferedIceCandidates)==null||s.push(e.candidate)},this.remotePeer&&(this.remotePeer.onicecandidate=e=>{var n,o;if(!e.candidate||!e.candidate.candidate){this.flushIceCandidates(this.localPeer);return}(o=(n=this.localPeer)==null?void 0:n.bufferedIceCandidates)==null||o.push(e.candidate)},this.localPeer.connectionState?this.localPeer.onconnectionstatechange=()=>{var e;return this.onConnectionStateChange((e=this.localPeer)==null?void 0:e.connectionState)}:this.localPeer.oniceconnectionstatechange=e=>this.onIceConnectionStateChange(e)))}async start(){this.mediaStream&&this.addStream(),await this.createOffer(),await this.createAnswer()}addStream(){this.mediaStream&&this.mediaStream.getTracks().forEach(e=>{var n,o;(n=this.localPeer)==null||n.addTrack(e),(o=this.remotePeer)==null||o.addTrack(e)})}flushIceCandidates(e){var n;(n=e==null?void 0:e.bufferedIceCandidates)==null||n.forEach(o=>e.addIceCandidate(o)),e!=null&&e.bufferedIceCandidates&&(e.bufferedIceCandidates=[])}async createOffer(){var e;return(e=this.localPeer)==null?void 0:e.createOffer(this.offerOptions).then(async n=>{const o=n;return this.setDescription(o,this.localPeer,this.remotePeer)})}async setDescription(e,n,o){await(n==null?void 0:n.setLocalDescription(e)),await(o==null?void 0:o.setRemoteDescription(e))}async createAnswer(){var e;try{const n=await((e=this.remotePeer)==null?void 0:e.createAnswer(this.offerOptions));await this.setDescription(n,this.remotePeer,this.localPeer)}catch{}}getConnectionInfo(){var s,a,u;const e=(s=this.localPeer)==null?void 0:s.iceCandidates,n=(a=this.localPeer)==null?void 0:a.connectionState,o=(u=this.localPeer)==null?void 0:u.iceConnectionState,r=n||o==="connected"?rs.CONNECTED:rs.FAILED;return{iceCandidates:e,result:r}}onConnectionStateChange(e){var n,o;if(this.connectionState=e,((n=this.localPeer)==null?void 0:n.connectionState)==="failed"||((o=this.localPeer)==null?void 0:o.connectionState)==="connected"){const r=this.getConnectionInfo();this.resolve(r),this.stop()}}onIceConnectionStateChange(e){var o;this.event=e;const n=(o=this.localPeer)==null?void 0:o.iceConnectionState;if(n==="failed"){const r=this.getConnectionInfo();this.resolve(r),this.stop()}if(n==="connected"||n==="completed"){const r=this.getConnectionInfo();this.resolve(r),window.clearTimeout(this.connectionTimeout),window.clearTimeout(this.flushTimeout)}}stop(){var e,n;try{(e=this.localPeer)==null||e.close(),(n=this.remotePeer)==null||n.close(),window.clearTimeout(this.connectionTimeout),window.clearTimeout(this.flushTimeout)}catch{}}}const io=()=>{const{callObject:t}=$t(),[e,n]=g.useState([]),o=g.useCallback(r=>{const s={timestamp:new Date,error:r};n(a=>[...a,s])},[]);return g.useEffect(()=>{if(t)return t.on("error",o),t.on("nonfatal-error",o),function(){t.off("error",o),t.off("nonfatal-error",o)}},[o,t]),{addError:o,errors:e}},ss=(t,e)=>{const n=g.useRef(t),o=g.useRef();return g.useEffect(()=>{n.current=t},[t]),g.useEffect(()=>{const r=()=>n.current();if(typeof e=="number")return o.current=window.setTimeout(r,e),()=>window.clearTimeout(o==null?void 0:o.current)},[e]),o},Sf=15,as={[ao.RELAY_ONLY]:{result:"",iceCandidates:[]}},Rf=()=>{const{addTestData:t}=$t(),[e,n]=g.useState("idle"),o=g.useRef("idle"),r=g.useRef(),[s,a]=g.useState(!1),[u,l]=g.useState(!1);ss(()=>{l(!0)},s?null:Sf*1e3),g.useEffect(()=>{u&&e==="running"&&n("stopping")},[u,e]);const d=g.useRef(),[p,v]=g.useState(as),{addError:A,errors:V}=io();g.useEffect(()=>{Object.keys(p).every(k=>{var B;return((B=p[k])==null?void 0:B.result)!==""})&&n("stopping")},[p]);const R=g.useCallback(()=>{var k;const S={errors:V,result:(k=p==null?void 0:p[ao.RELAY_ONLY])==null?void 0:k.result};t("network",S)},[t,V,p]);g.useEffect(()=>{(async()=>{var k,B;switch(e){case"idle":break;case"starting":const K=(k=r.current)==null?void 0:k.getAudioTracks().length,Z=(B=r.current)==null?void 0:B.getVideoTracks().length;K||A("No audio track found: this may affect the network test results in Safari."),Z||A("No video track found: this may affect the network test results in Safari."),!Z&&!K&&A("No audio and video tracks found. This may affect the network test results in Safari.");const le=await(await fetch(os.TWILIO)).json(),ye=await Promise.all(Object.keys(p).map(H=>C(H,le,r.current)));d.current=ye,n("running");break;case"running":break;case"stopping":d.current&&await Promise.all(d.current.map(H=>{H.stop()})),n("finished");break;case"finished":if(o.current==="finished")return;R(),delete d.current,a(!0),v(as);break}o.current=e})()},[A,e,p,R]);async function C(S,k,B){const K=new mf({natService:"twilio",connectionMode:S,iceServers:k,mediaStream:B});return K.setupRTCPeerConnection().then(Z=>{const Q=Z;v(le=>({...le,[S]:{result:Q.result,iceCandidates:Q.iceCandidates}}))}),K}const W=g.useCallback(async S=>{S&&(r.current=S),n("starting")},[]),G=g.useCallback(()=>{e!=="finished"&&n("stopping")},[e]);return{startNetworkTest:W,stopNetworkTest:G,networkTestState:e}},yf=["af-south-1","ap-northeast-2","ap-southeast-1","ap-southeast-2","ap-south-1","eu-central-1","eu-west-2","sa-east-1","us-east-1","us-west-2"],gf=async t=>{try{const o=(await(await fetch(`https://gs.daily.co/rooms/check/test-rooms/${t}`)).json()).worker.wssUri;return await bf(o),t}catch(e){throw console.error(`[${t}] Caught error:`,e),t}},bf=(t,e=10)=>new Promise((n,o)=>{const r=new WebSocket(t),s=setTimeout(()=>{r.close(),o(`Connection to ${t} timed out`)},e*1e3);r.addEventListener("open",()=>{clearTimeout(s),r.close(),n()}),r.addEventListener("error",a=>{clearTimeout(s),r.close(),o(`Error connecting to ${t}: ${a}`)})}),Tf=()=>yf.map(t=>gf(t)),Ef=10,is={"eu-central-1":{result:""},"eu-west-2":{result:""},"us-east-1":{result:""},"ap-south-1":{result:""},"af-south-1":{result:""},"us-west-2":{result:""},"ap-southeast-1":{result:""},"sa-east-1":{result:""},"ap-northeast-2":{result:""},"ap-southeast-2":{result:""}},wf=()=>{const{addTestData:t}=$t(),{errors:e}=io(),[n,o]=g.useState("idle"),r=g.useRef("idle"),[s,a]=g.useState(!1),[u,l]=g.useState(!1);ss(()=>{l(!0)},s?null:Ef*1e3),g.useEffect(()=>{u&&n==="running"&&o("stopping")},[u,n]);const[d,p]=g.useState(is);g.useEffect(()=>{Object.keys(d).every(C=>{var W;return((W=d[C])==null?void 0:W.result)!==""})&&o("finished")},[d]);const v=g.useCallback(()=>{const R=Object.keys(d).filter(k=>{var B;return((B=d[k])==null?void 0:B.result)==="passed"}),C=Object.keys(d).filter(k=>{var B;return((B=d[k])==null?void 0:B.result)==="failed"});let W="";const G=Object.values(d).length;C.length===G?W="failed":C.length>0?W="warning":W="passed",t("websockets",{errors:e,failed:C,passed:R,result:W})},[t,e,d]);g.useEffect(()=>{(async()=>{switch(n){case"idle":break;case"starting":Tf().forEach(C=>{C.then(W=>{p(G=>({...G,[W]:{result:"passed"}}))},W=>{p(G=>({...G,[W]:{result:"failed"}}))})}),o("running");break;case"running":break;case"stopping":o("finished");break;case"finished":if(r.current==="finished")return;a(!0),v(),p(is);break}r.current=n})()},[v,n]);const A=g.useCallback(()=>{o("starting")},[]),V=g.useCallback(()=>{n!=="finished"&&o("stopping")},[n]);return{startWebsocketsTest:A,stopWebsocketsTest:V,websocketsTestState:n}};class Nf{constructor({iceServers:e,mediaStream:n}){this.iceServers=e,this.localPeer=null,this.remotePeer=null,this.mediaStream=n,this.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0}}async setupRTCPeerConnection(){if(!window.RTCPeerConnection)return;const e={iceServers:this.iceServers,iceTransportPolicy:"relay"};return this.localPeer=new RTCPeerConnection(e),this.remotePeer=new RTCPeerConnection(e),this.localPeer.bufferedIceCandidates=[],this.remotePeer.bufferedIceCandidates=[],this.setupPeerListeners(),await this.start(),new Promise((n,o)=>{this.connectionEstablished=n,this.connectionFailed=o,this.connectionTimeout=window.setTimeout(this.connectionFailed,15e3)})}setupPeerListeners(){this.localPeer&&(this.localPeer.onicecandidate=e=>{var n,o;!e.candidate||!e.candidate.candidate?this.flushIceCandidates(this.remotePeer):(n=this.remotePeer)!=null&&n.bufferedIceCandidates?this.remotePeer.bufferedIceCandidates.push(e.candidate):(o=this.remotePeer)==null||o.addIceCandidate(e.candidate)},this.remotePeer&&(this.remotePeer.onicecandidate=e=>{var n,o;!e.candidate||!e.candidate.candidate?this.flushIceCandidates(this.localPeer):(n=this.localPeer)!=null&&n.bufferedIceCandidates?this.localPeer.bufferedIceCandidates.push(e.candidate):(o=this.localPeer)==null||o.addIceCandidate(e.candidate)},this.localPeer.connectionState?this.localPeer.onconnectionstatechange=()=>this.onConnectionStateChange():this.localPeer.oniceconnectionstatechange=()=>this.onIceConnectionStateChange()))}async start(){this.mediaStream&&this.addStream(),await this.createOffer(),await this.createAnswer(),await this.flushIceCandidates(this.localPeer),await this.flushIceCandidates(this.remotePeer)}flushIceCandidates(e){var n;(n=e==null?void 0:e.bufferedIceCandidates)==null||n.forEach(o=>e.addIceCandidate(o)),e!=null&&e.bufferedIceCandidates&&(e.bufferedIceCandidates=null)}addStream(){this.mediaStream&&this.mediaStream.getTracks().forEach(e=>{var n,o;(n=this.localPeer)==null||n.addTrack(e),(o=this.remotePeer)==null||o.addTrack(e)})}createOffer(){var e;return(e=this.localPeer)==null?void 0:e.createOffer(this.offerOptions).then(n=>{const o=n;return this.setDescription(o,this.localPeer,this.remotePeer)})}async setDescription(e,n,o){await(n==null?void 0:n.setLocalDescription(e)),await(o==null?void 0:o.setRemoteDescription(e))}createAnswer(){var e;return(e=this.remotePeer)==null?void 0:e.createAnswer(this.offerOptions).then(n=>{const o=n;return this.setDescription(o,this.remotePeer,this.localPeer)})}onIceConnectionStateChange(){var n;const e=(n=this.localPeer)==null?void 0:n.iceConnectionState;e==="failed"&&(this.connectionFailed(),this.stop()),(e==="connected"||e==="completed")&&(this.connectionEstablished(),window.clearTimeout(this.connectionTimeout))}onConnectionStateChange(){var n;const e=(n=this.localPeer)==null?void 0:n.connectionState;e==="failed"&&(this.connectionFailed(),this.stop()),e==="connected"&&(this.connectionEstablished(),window.clearTimeout(this.connectionTimeout))}stop(){var e,n;try{(e=this.localPeer)==null||e.close(),(n=this.remotePeer)==null||n.close()}catch{}}}class Af{constructor({iceServers:e,mediaStream:n}){this.intervalId="",this.timeoutId="",this.roundTripTimes=[],this.iceServers=e,this.mediaStream=n}async setupPeerConnection(){this.networkTester=new Nf({iceServers:this.iceServers,mediaStream:this.mediaStream}),await this.networkTester.setupRTCPeerConnection(),this.peerConnection=this.networkTester.localPeer}async startContinuouslySampling(){await this.setupPeerConnection(),this.roundTripTimes=[]}async getSample(){if(!this.peerConnection)throw new Error("You need at peerConnection to continue");return await this.getRoundTripTimePeriodically(),{maxRTT:this.getMaxRtt(),packetLoss:await this.getPacketLoss()}}async getRoundTripTimePeriodically(){const e=await this.sampleRoundTripTime();e&&this.roundTripTimes.push(e)}sampleRoundTripTime(){var e;return(e=this.peerConnection)==null?void 0:e.getStats().then(n=>{const o=this.mapToObj(n),r=Object.values(o),s=r.filter(a=>a.currentRoundTripTime);if(s.length===0){const a=r.find(u=>typeof u.roundTripTime=="number");return a?a.roundTripTime/1e3:0}else{const a=s.find(u=>u.nominated);return a?a.currentRoundTripTime:s[0].currentRoundTripTime}})}async getPacketLoss(){var e;return(e=this.peerConnection)==null?void 0:e.getStats().then(n=>{const o=this.mapToObj(n),s=Object.values(o).find(d=>d.kind==="video"),a=s&&s.packetsLost?s.packetsLost:0,u=s&&s.packetsReceived?s.packetsReceived:0,l=a+u;return u>0?a/l*100:0})}getMaxRtt(){return Math.max(...this.roundTripTimes)}closeConnection(){var e;(e=this.networkTester)==null||e.stop()}stopSampling(){clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.closeConnection()}mapToObj(e){if(!e.entries)return e;const n={};return e.forEach((o,r)=>{n[r]=o}),n}}const Cf=1,Lf=.7,Vf=10,kf=5,If=t=>{if(!t)return"failed";let e="",n="";return t.maxRTT!==null&&t.maxRTT>=Cf?e="bad":t.maxRTT!==null&&t.maxRTT>=Lf?e="warning":e="good",t.packetLoss!==null&&typeof t.packetLoss<"u"&&t.packetLoss>=Vf?n="bad":t.packetLoss!==null&&typeof t.packetLoss<"u"&&t.packetLoss>=kf?n="warning":n="good",e==="good"&&n==="good"?"good":e==="bad"||n==="bad"?"bad":"warning"},cs={maxRTT:null,packetLoss:null},us="",Pf=()=>{const{addTestData:t}=$t(),e=g.useRef("idle"),[n,o]=g.useState("idle"),r=g.useRef(0),s=g.useRef(),[a,u]=g.useState(0-r.current),l=g.useRef(),d=g.useRef(),p=g.useRef(cs),v=g.useRef(us),{addError:A,errors:V}=io();g.useEffect(()=>{a<r.current||!a||o("stopping")},[a]);const R=g.useCallback(()=>{const G={errors:V,result:v.current,data:p.current};t("connection",G)},[t,V]);g.useEffect(()=>((async()=>{var S,k,B;switch(n){case"idle":break;case"starting":if(!l.current)return;const K=(S=l.current)==null?void 0:S.getAudioTracks().length,Z=(k=l.current)==null?void 0:k.getVideoTracks().length;if(K||A("No audio track found: this may affect the throughput test results."),Z||A("No video track found: this may affect the throughput test results."),!Z&&!K){A("No audio and video tracks found: cannot measure throughput."),o("stopping");return}const Q=os.TWILIO,ye=await(await fetch(Q)).json();d.current=new Af({iceServers:ye,mediaStream:l.current}),await d.current.startContinuouslySampling(),o("running");break;case"running":s.current=setInterval(async()=>{if(!d.current)return;const H=await d.current.getSample();p.current=H,u(_e=>_e+1),v.current=If(H)},1e3);break;case"stopping":(B=d.current)==null||B.stopSampling(),clearInterval(s.current),r.current=0,o("finished");break;case"finished":{if(e.current==="finished")return;R(),delete d.current,p.current=cs,v.current=us,u(0);break}}e.current=n})(),()=>{clearInterval(s.current)}),[A,n,R]);const C=g.useCallback(async(G,S=15)=>{l.current=G,r.current=S,o("starting")},[]),W=g.useCallback(()=>{n!=="finished"&&o("stopping")},[n]);return{connectionTestState:n,startConnectionTest:C,stopConnectionTest:W,timeElapsed:a}},Df=({children:t,callObject:e})=>(g.useEffect(()=>{if(!e||e.isDestroyed())return;function n(){switch(e==null?void 0:e.meetingState()){case"left-meeting":e.destroy();break}}return n(),e==null||e.on("left-meeting",n),e.startCamera({audioSource:!0,videoSource:!1}),()=>{e.off("left-meeting",n)}},[e]),En.jsx(ff,{children:En.jsx(_f,{callObject:e,children:t})}));Le.DailyTestProvider=Df,Le.useConnectionTest=Pf,Le.useDailyTest=$t,Le.useNetworkTest=Rf,Le.useWebsocketsTest=wf,Object.defineProperty(Le,Symbol.toStringTag,{value:"Module"})});
